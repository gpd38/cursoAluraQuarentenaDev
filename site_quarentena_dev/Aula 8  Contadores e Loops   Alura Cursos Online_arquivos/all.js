!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(e,t){var s,P=this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o};function s(e){if(!e)return s.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var n=t,o=0;o<this.length;o++)n=e(n,this[o],o,this);return n});var i="";return("."+e).split(".").reduce(function(e,t,n,o){i?i+="."+t:i=t;var r=e["__"+i];return void 0===r&&(s.Logger.prototype=e,r=new s.Logger(i),e["__"+i]=r),r},s.__)}!function(r){function t(e,t,n){void 0!==t[e]&&(null!==t[e]?n[e]=t[e]:delete n[e])}function c(e){if((null==r.enabled||r.enabled)&&!(null!=r.maxMessages&&r.maxMessages<1)){try{if(e.userAgentRegex&&!new RegExp(e.userAgentRegex).test(navigator.userAgent))return}catch(e){}try{if(e.ipRegex&&r.clientIP&&!new RegExp(e.ipRegex).test(r.clientIP))return}catch(e){}return 1}}function l(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return}catch(e){}return 1}function a(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}r.enabled,r.maxMessages,r.defaultAjaxUrl,r.clientIP,r.defaultBeforeSend,r.requestId="";var o=function(e,t,n){this.msg=e,this.meta=t,this.finalString=n};function u(e){var t,n=a(e);switch(typeof n){case"string":return new o(n,null,n);case"number":case"boolean":return t=n.toString(),new o(t,null,t);case"undefined":return new o("undefined",null,"undefined");case"object":return n instanceof RegExp||n instanceof String||n instanceof Number||n instanceof Boolean?(t=n.toString(),new o(t,null,t)):new o(null,n,JSON.stringify(n));default:return new o("unknown",null,"unknown")}}function e(){return 1e3}function n(){return 2e3}function i(){return 3e3}function s(){return 4e3}function d(){return 5e3}function p(){return 6e3}r.setOptions=function(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),this},r.getAllLevel=function(){return-2147483648},r.getTraceLevel=e,r.getDebugLevel=n,r.getInfoLevel=i,r.getWarnLevel=s,r.getErrorLevel=d,r.getFatalLevel=p,r.getOffLevel=function(){return 2147483647};var f=function(e,t){this.inner=t,this.name="JL.Exception",this.message=u(e).finalString};(r.Exception=f).prototype=new Error;var g=function(e,t,n,o){this.l=e,this.m=t,this.n=n,this.t=o};r.LogItem=g;var m=(h.prototype.setOptions=function(e){return t("level",e,this),t("ipRegex",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("sendWithBufferLevel",e,this),t("storeInBufferLevel",e,this),t("bufferSize",e,this),t("batchSize",e,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this},h.prototype.log=function(e,t,n,o,r,i,s){var a;c(this)&&l(this,i)&&(r<this.storeInBufferLevel||(a=new g(r,i,s,(new Date).getTime()),r<this.level?0<this.bufferSize&&(this.buffer.push(a),this.buffer.length>this.bufferSize&&this.buffer.shift()):(r<this.sendWithBufferLevel||this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(a),this.batchBuffer.length>=this.batchSize&&this.sendBatch())))},h.prototype.sendBatch=function(){0!=this.batchBuffer.length&&(null!=r.maxMessages&&r.maxMessages<1||(null!=r.maxMessages&&(r.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0))},h);function h(e,t){this.appenderName=e,this.sendLogItems=t,this.level=r.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.buffer=[],this.batchBuffer=[]}r.Appender=m;var v,S=(P(I,v=m),I.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),v.prototype.setOptions.call(this,e),this},I.prototype.sendLogItemsAjax=function(e){try{var t="/jsnlog.logger";null!=r.defaultAjaxUrl&&(t=r.defaultAjaxUrl),this.url&&(t=this.url);var n=JSON.stringify({r:r.requestId,lg:e}),o=this.getXhr(t);"function"==typeof this.beforeSend?this.beforeSend(o):"function"==typeof r.defaultBeforeSend&&r.defaultBeforeSend(o),o.send(n)}catch(e){}},I.prototype.getXhr=function(e){var t=new XMLHttpRequest;if("withCredentials"in t||"undefined"==typeof XDomainRequest)return t.open("POST",e),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("JSNLog-RequestId",r.requestId),t;var n=new XDomainRequest;return n.open("POST",e),n},I);function I(e){v.call(this,e,I.prototype.sendLogItemsAjax)}r.AjaxAppender=S;var y,C=(P(w,y=m),w.prototype.clog=function(e){console.log(e)},w.prototype.cerror=function(e){console.error?console.error(e):this.clog(e)},w.prototype.cwarn=function(e){console.warn?console.warn(e):this.clog(e)},w.prototype.cinfo=function(e){console.info?console.info(e):this.clog(e)},w.prototype.cdebug=function(e){console.debug?console.debug(e):this.cinfo(e)},w.prototype.sendLogItemsConsole=function(e){try{if(!console)return;var t;for(t=0;t<e.length;++t){var n=e[t],o=n.n+": "+n.m;"undefined"==typeof window&&(o=new Date(n.t)+" | "+o),n.l<=r.getDebugLevel()?this.cdebug(o):n.l<=r.getInfoLevel()?this.cinfo(o):n.l<=r.getWarnLevel()?this.cwarn(o):this.cerror(o)}}catch(e){}},w);function w(e){y.call(this,e,w.prototype.sendLogItemsConsole)}r.ConsoleAppender=C;var b=(E.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},E.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},E.prototype.log=function(e,t,n){var o,r,i,s=0;if(!this.appenders)return this;if(e>=this.level&&c(this)&&(n?(r=this.buildExceptionObject(n)).logData=a(t):r=t,l(this,(o=u(r)).finalString))){if(this.onceOnly)for(s=this.onceOnly.length-1;0<=s;){if(new RegExp(this.onceOnly[s]).test(o.finalString)){if(this.seenRegexes[s])return this;this.seenRegexes[s]=!0}s--}for(o.meta=o.meta||{},o.meta.loggerName=this.loggerName,s=this.appenders.length-1;0<=s;)this.appenders[s].log((i=e)<=1e3?"trace":i<=2e3?"debug":i<=3e3?"info":i<=4e3?"warn":i<=5e3?"error":"fatal",o.msg,o.meta,function(){},e,o.finalString,this.loggerName),s--}return this},E.prototype.trace=function(e){return this.log(1e3,e)},E.prototype.debug=function(e){return this.log(2e3,e)},E.prototype.info=function(e){return this.log(3e3,e)},E.prototype.warn=function(e){return this.log(4e3,e)},E.prototype.error=function(e){return this.log(5e3,e)},E.prototype.fatal=function(e){return this.log(6e3,e)},E.prototype.fatalException=function(e,t){return this.log(6e3,e,t)},E);function E(e){this.loggerName=e,this.seenRegexes=[]}r.Logger=b,r.createAjaxAppender=function(e){return new S(e)},r.createConsoleAppender=function(e){return new C(e)};var H=new S("");"undefined"==typeof window&&(H=new C("")),r.__=new r.Logger(""),r.__.setOptions({level:r.getDebugLevel(),appenders:[H]})}(s=s||{}),void 0!==t&&(t.JL=s),"function"==typeof __jsnlog_configure&&__jsnlog_configure(s)},function(e,t){var i;window.appConfig={},(i=appConfig).source={Mobile:"Mobile",Web:"Web"},i.pluginType={LightBox:{Name:"LightBox",Id:"6"},ConnectWithMail:{Name:"ConnectWithMail",Id:"10"},Connect:{Name:"Connect",Id:"3"},SocialShare:{Name:"SocialShare",Id:"7"},SocialBounce:{Name:"SocialBounce",Id:"8"},SocialBar:{Name:"SocialBar",Id:"9"},SocialBox:{Name:"SocialBox",Id:"2"},SocialPush:{Name:"SocialPush",Id:"11"},SocialBounceImage:{Name:"SocialBounceWithImage",Id:"12"},OnSite:{Name:"OnSite",Id:"13"},SocialBounceSurvey:{Name:"SocialBounceWithSurvey",Id:"20"},SocialBounceQuiz:{Name:"SocialBounceWithQuiz",Id:"21"},LightboxText:{Name:"LightboxText",Id:"22"},LightboxImage:{Name:"LightboxImage",Id:"23"},LightboxRedirectText:{Name:"LightboxRedirectText",Id:"25"},LightboxRedirectImage:{Name:"LightboxRedirectImage",Id:"26"}},i.Customer={SocialMiner:{Id:"064B7A45-4372-4155-A286-A06A97C7D626",Name:"SocialMiner",ProdAppId:"1443650659203895",DevAppId:"1474359889466305"}},i.GetFbApiVersion=function(){return"v2.12"},i.GetChannelUrl=function(){return"https://plugins.soclminer.com.br/v3/assets/channel.min.html"},i.GetGAPageName=function(e,t){return e+t},i.GetGAPageTitle=function(e,t){return e+" "+t},i.IsMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},i.IsApple=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},i.IsSupportPush=function(){return!/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},i.IsAndroid=function(){return/Android/i.test(navigator.userAgent)},i.IsChrome=function(){if(i.IsMobile())return!!window.chrome;var e=window.chrome,t=window.navigator,n=t.vendor,o=void 0!==window.opr,r=-1<t.userAgent.indexOf("Edge");return!!t.userAgent.match("CriOS")||null!=e&&"Google Inc."===n&&!1==o&&!1==r}},function(e,t){var n;window.soclCookie={},(n=soclCookie).createCookie=function(e,t,n,o){var r="";if(n||o){var i=new Date;i.setTime(i.getTime()+(o||24*n*60*60*1e3)),r="; expires="+i.toGMTString()}var s="";window.isSecureContext&&(s="secure"),document.cookie=e+"="+t+r+"; path=/;SameSite=None;"+s},n.removeCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},n.createCookieOnSite=function(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+n),o="; expires="+r.toGMTString()}var i="";window.isSecureContext&&(i="secure"),document.cookie=e+"="+t+o+"; path=/;SameSite=None;"+i},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}},function(e,t){window.soclHelper={};!function(a){var s=5,n=2,o=2,c=2,r=1,l=1,u=1,d=2,p=2,f=2,g=1,m=3,h=7,v={KEY:"smeventssent_",INTERVAL:12e4},S={Presales_LastClick:"Presales.LastClick",Presales_AssistedSale:"Presales.AssistedSale",Presales_NoInteraction:"Presales.NoInteraction",Presales_Suppression:"Presales.Suppression",Presales_Error:"Presales.Error"},I=1,y=!1,C=["smid","utm_","gclid","iprom","ipron"],w={apiKey:"AIzaSyDV2_rHShUBKzpWTQn5DoCGdxB40aFBwnI",authDomain:"push-messaging-for-chrome-1114.firebaseapp.com",databaseURL:"https://push-messaging-for-chrome-1114.firebaseio.com",projectId:"push-messaging-for-chrome-1114",storageBucket:"push-messaging-for-chrome-1114.appspot.com",messagingSenderId:"694635173055",appId:"1:694635173055:web:51613b33da784a5058a20a"};a.urlContainsSpecificParams=function(e){var o=null;return e.split("&").forEach(function(e){for(var t=e.split("="),n=0;n<C.length;n++)t[0].startsWith(C[n])&&((o=o||{})[t[0]]=t[1])}),o};a.getEnvironment=function(){return""},a.getEventsCookieInfo=function(){return v};var b="https://"+a.getEnvironment()+"plugins.soclminer.com.br/v3/assets/js/",E=1;a.PROXY_URI="https://"+a.getEnvironment()+"plugins.soclminer.com.br/v3/assets/proxy.min.html",a.replaceAll=function(e,t,n){return n.replace(new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g"),t)},a.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.formatDate=function(e){var t=new Date(e),n=""+(t.getMonth()+1),o=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),[r,n,o].join("-")},a.getNow=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},a.contains=function(e,t){return-1!=e.indexOf(t)},a.getQueryStringParams=function(e,t){for(var n=(t||window.location.search.substring(1)).split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return r[1]}},a.extractClientIdFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("clientId")||soclHelper.getQueryStringParams("clientId",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("clientId",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractClientIdFromUrl - Failed to extract clientId: ".concat(e))}return e},a.extractSessionHashFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("sessionHash")||soclHelper.getQueryStringParams("sessionHash",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("sessionHash",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractSessionHashFromUrl - Failed to extract sessionHash: ".concat(e))}return e},a.toGUID=function(e){var t="";return""!==e&&(t=(t=(t=(t=(t+=e.substring(0,8))+"-"+e.substring(8,12))+"-"+e.substring(12,16))+"-"+e.substring(16,20))+"-"+e.substring(20,32)),t},a.hasClass=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},a.updateAccessToken=function(n){n&&(soclCookie.getCookie("smextoken_"+n)||soclConnect.getStatus(function(e){e&&soclConnect.getFbCurrentAccessToken(function(e){e&&soclConnect.getId(n,function(t){t&&getCORS(apiUrl+"/fb/exchangeToken/"+n+"/"+e+"/?format=json",null,function(e){postCORS(apiUrl+"/users/profile/"+e.response.accessToken+"/?format=json",{customerId:n,userId:t},function(e){soclCookie.createCookie("smextoken_"+n,!0,7)})})})})}))},a.formatUrlBy=function(e,t,n,o){if(n&&n.length){var r=[apiUrl+"/customers/"+e+"/formaturl?format=json&pluginType="+t],i=(r=r.concat(n)).join("&url=");getCORS(i,null,function(e){o(e)})}},a.formatUrlPipe=function(e){var t=JSON.parse(e);return t.link=t.link.replace("|",encodeURI("|")),t.linkView=t.linkView.replace("|",encodeURI("|")),t=JSON.stringify(t)},a.findLocalItems=function(e){var t,n=[];for(t in localStorage)localStorage.hasOwnProperty(t)&&(t.match(e)||!e&&"string"==typeof t)&&(value=JSON.parse(localStorage.getItem(t)),n.push(t));return n},a.getCustomerInfo=function(r,i,s){a.getParamOnSession(function(e){var t=""!==document.referrer?encodeURIComponent(document.referrer):"";-1!==t.indexOf("minerlanding")&&(t="https://minerlanding.soclminer.com.br");var n=a.findLocalItems("onsiteview_"),o="";n.forEach(function(e){o+="&OnsiteViewed="+e}),getCORS(apiUrl+"/customers/"+r+"?format=json&url="+i+"&referrer="+t+"&paramOnSession="+e+"&isMobile="+a.isMobile()+o,null,function(e){s(e)})})},a.createSessionHash=function(e){return t(e+soclConnect.generateRndGuidV4()+(new Date).toISOString())},a.getSessionHash=function(){return a.getSessionStorageValue("session-guid")};function H(e,t){var n=soclHelper.replaceAll("-","",e),o=a.replaceAll("{0}",n,(t||"logs")+"_{0}");return soclTracking.getLocalDB(o)}var P=function(e){if(!(t=e)||!t.length||"{"!==t[0]&&"["!==t[0])return e;var t,n=JSON.parse(e);return n instanceof Array?n.map(function(e){return P(e)}):Object.entries(n).reduce(function(e,t){var n=t[0],o=t[1],r={};return r[n]=P(o),Object.assign({},e,r)},{})};a.getMetadata=function(){var e=window.sm__dataLayer||{};for(i in e)e[i]=e[i]instanceof Array?e[i].toString():e[i];return e},a.postBehaviors=function(e,t,n,o){function r(){O(e,t,o).forEach(function(e){e.userAgent=navigator.userAgent,postJsonCORS("https://wonka.socialminer.com/ursa/enterprise/behaviors",e)}),soclCookie.createCookie(i,"true",null,12e4)}var i="smbehaviorssent_"+a.replaceAll("-","",e);if(n)r();else{var s=!soclCookie.getCookie(i);soclHelper.getPurchaseUrl(function(e){var t,n,o=(t=e,n=document.location.href.replace(/^(http|https):\/\//i,""),t.some(function(e){return e=e.replace(/^(http|https):\/\//i,""),soclHelper.contains(n,e)}));(s||o)&&r()})}},a.getSMIDToIFrameSrc=function(e,t){if(t)return"&userId="+t;var n=soclHelper.getStoreValue(soclConnect.createSMIdKey(e));return n?"&userId="+n:""},a.setCustomerInfoToLocalStorage=function(e){var t="smCustomerInfo_"+a.replaceAll("-","",e.id);return a.setLocalStorageValue(t,e)},a.getCustomerInfoFromLocalStorage=function(e){var t="smCustomerInfo_"+a.replaceAll("-","",e);return a.getLocalStorageValue(t)},a.existsUrlWithPersonId=function(){return location.href.includes("smid")&&location.search.split("p=")[1]},a.getPersonIdFromUrl=function(){return location.search.split("p=")[1]};var O=function(i,s,a){var c=new Date("2019-07-01 00:00:00"),e="items",t=[],n=H(i);if(n.tableExists(e)){var o={limit:10},r=n.queryAll(e,o);if(r&&r.length){var l=r.slice(0,10).reduce(function(e,t){if(new Date(t.date)<c)return e;var n={customerId:i,clientId:t.clientId||s,personId:a,metadata:t.metadata||{},url:encodeURIComponent(t.url),referer:""!==t.referrer?encodeURIComponent(t.referrer):""};n.metadata=_(n.metadata);var o=t.sessionHash||"00000000-0000-0000-0000-000000000000",r=e[o]||[];return r.push(n),e[o]=r,e},{});t=Object.keys(l).map(function(e){return{behaviors:l[e],sessionHash:e}});var u=0;n.deleteRows(e,function(e){return++u<=10}),n.commit()}}return t},_=function(e){return e?(delete e.price,delete e.notAvailable,e):{}};a.createEvent=function(s){soclHelper.getCID(function(e){if((0!==e||s.customerId)&&s&&s.type&&0<s.type.trim().length){var t=a.getOrCreateSMObj(e||s.customerId),n=soclHelper.replaceAll("-","",e||s.customerId),o=a.getOrCreateSessionHash(),r={type:s.type,step:s.step,channelId:s.channelId,customerId:e||s.customerId,clientId:t.clientId,systemId:I,dateTime:a.getNow(),personId:s.personId||soclHelper.getStoreValue("smid_"+n),additionalData:encodeURI(JSON.stringify(s.additionalData||{}))},i="events_"+n;soclTracking.insertEventItem(i,{sessionHash:o,event:r}),socl.emmit.onEvent(r)}})},a.shouldSendEvents=function(e){return!soclCookie.getCookie(v.KEY+e)},a.sendEvents=function(e,t){if(a.shouldSendEvents(e)||t){var n=k(e),o="https://"+a.getEnvironment()+"wonka.socialminer.com/ursa/enterprise/events";n.forEach(function(e){postJsonCORS(o,e)}),soclCookie.createCookie(v.KEY+e,"true",null,v.INTERVAL)}};var k=function(e){var t=[],n="items",o=H(e,"events");if(o.tableExists(n)){var r={limit:5},i=o.queryAll(n,r);if(i&&i.length){var s=i.slice(0,5).reduce(function(e,t){var n={type:t.event.type,step:t.event.step,channelId:t.event.channelId,customerId:t.event.customerId,clientId:t.event.clientId,systemId:t.event.systemId,dateTime:t.event.dateTime,personId:t.event.personId,additionalData:t.event.additionalData},o=t.sessionHash,r=e[o]||[];return r.push(n),e[o]=r,e},{});t=Object.keys(s).map(function(e){return{events:s[e],sessionHash:e}});var a=0;o.deleteRows(n,function(e){return++a<=5}),o.commit()}}return t};a.getPluginSettingsByType=function(e,t,n,o){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n,null,function(e){o(e)})},a.getPluginSettings=function(e,t,n){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json",null,function(e){n(e)})};var t=function(e,t){function n(e,t){return e<<t|e>>>32-t}function o(e){var t,n="";for(t=7;0<=t;t--)n+=(e>>>4*t&15).toString(16);return n}var r,i,s,a,c,l,u,d,p,f,g=new Array(80),m=1732584193,h=4023233417,v=2562383102,S=271733878,I=3285377520,y=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t}(e)).length,C=[];for(i=0;i<y-3;i+=4)s=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),C.push(s);switch(y%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(y-1)<<24|8388608;break;case 2:i=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:i=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(C.push(i);C.length%16!=14;)C.push(0);for(C.push(y>>>29),C.push(y<<3&4294967295),r=0;r<C.length;r+=16){for(i=0;i<16;i++)g[i]=C[r+i];for(i=16;i<=79;i++)g[i]=n(g[i-3]^g[i-8]^g[i-14]^g[i-16],1);for(a=m,c=h,l=v,u=S,d=I,i=0;i<=19;i++)p=n(a,5)+(c&l|~c&u)+d+g[i]+1518500249&4294967295,d=u,u=l,l=n(c,30),c=a,a=p;for(i=20;i<=39;i++)p=n(a,5)+(c^l^u)+d+g[i]+1859775393&4294967295,d=u,u=l,l=n(c,30),c=a,a=p;for(i=40;i<=59;i++)p=n(a,5)+(c&l|c&u|l&u)+d+g[i]+2400959708&4294967295,d=u,u=l,l=n(c,30),c=a,a=p;for(i=60;i<=79;i++)p=n(a,5)+(c^l^u)+d+g[i]+3395469782&4294967295,d=u,u=l,l=n(c,30),c=a,a=p;m=m+a&4294967295,h=h+c&4294967295,v=v+l&4294967295,S=S+u&4294967295,I=I+d&4294967295}return p=o(m)+o(h)+o(v)+o(S)+o(I),t?(f=p.toLowerCase(),btoa(String.fromCharCode.apply(null,f.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))):p.toLowerCase()};a.getPluginSettingsDemo=function(e,t,n,o,r){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n+"&pluginIdentifier="+o,null,function(e){r(e)})},a.listCampaignsBy=function(e,t){var n=a.isMobile()?h:m,o=apiUrl+"/customers/"+e+"/campaign/?format=json&channelType="+n;getCORS(o,null,function(e){t(e)})},a.setSessionValue=function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}},a.setStoreValue=function(e,t){try{window.localStorage.setItem(e,t.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"'))}catch(e){}},a.setCookie=function(e,t,n){try{soclCookie.createCookie(e,t,n)}catch(e){}},a.getSessionValue=function(e){var t=null;try{t=window.sessionStorage.getItem(e,t)}catch(e){}return t},a.categorizeLastClick=function(e,t){try{var n={};if(t=t||[],sortedImpactList=(e=e||[]).slice().reverse(),sortedViewList=t.slice().reverse(),n.additionalData={Impact:e,Views:t},impact=sortedImpactList.find(function(e){return e.smid}),impact)return 0==sortedImpactList.indexOf(impact)?n.type=S.Presales_LastClick:n.type=S.Presales_AssistedSale,n;if(sortedViewList.length){if(sortedViewList[0].kind&&"suppression"===sortedViewList[0].kind){var o=sortedViewList.find(function(e){return"suppression"==e.kind}),r=sortedViewList.find(function(e){return"view"==e.kind});if(!r)return n.type=S.Presales_Suppression,n;if(delta=new Date(o.create_date)-new Date(r.create_date),18e5<delta)return n.type=S.Presales_Suppression,n}return n.type=S.Presales_NoInteraction,n}}catch(e){return n.type=S.Presales_Error,n}},a.addOrGetCookieAsList=function(e,t){var n=[];try{if(n=JSON.parse(soclCookie.getCookie(e)),!Array.isArray(n)){var o=n;n=[],"object"==typeof o&&n.push(o)}}catch(e){n=[]}return t&&n.push(t),n.slice(Math.max(n.length-10,0))};function x(e){return"sm__"+e.replace(T,"")}var T=new RegExp("^sm__");a.getLocalStorageValue=function(e){var t=window.localStorage.getItem(x(e));return!t||"["!==t[0]&&"{"!==t[0]?t:P(t)},a.setLocalStorageValue=function(e,t){return window.localStorage.setItem(x(e),"object"==typeof t?JSON.stringify(t):t),t},a.getSessionStorageValue=function(e){var t=window.sessionStorage.getItem(x(e));return!t||"["!==t[0]&&"{"!==t[0]?t:JSON.parse(t)},a.setSessionStorageValue=function(e,t){return window.sessionStorage.setItem(x(e),"object"==typeof t?JSON.stringify(t):t),t},a.getStoreValue=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},a.removeSessionValue=function(e){try{window.sessionStorage.removeItem(e)}catch(e){}},a.removeStoreValue=function(e){try{window.localStorage.removeItem(e)}catch(e){}},a.clearSession=function(){try{window.sessionStorage.clear()}catch(e){}},a.clearStore=function(){try{window.localStorage.clear()}catch(e){}},a.computePluginHit=function(n,o){soclHelper.getCID(function(t){0!==t&&soclHelper.getPID(o,function(e){0!==e&&soclPerfCounter.event(e,n,o,t)})})},a.getCID=function(e){var t=soclHelper.getStoreValue("smcid");null!==t&&""!==t?e(t):setTimeout(function(){0<--n?a.getCID(e):e(0)},1e3)},a.isInControlGroup=function(e,t){return e&&t&&e<=t},a.isInSuppressionGroup=function(e,t){if(!t)return!1;try{var n=soclHelper.getCustomerInfoFromLocalStorage(e),o=soclHelper.getOrCreateSMObj(e),r=n.features.find(function(e){return e.pluginId==t});return r&&soclHelper.isInControlGroup(o.randomNumber,r.controlGroupPercentage||0)}catch(e){console.log(e)}};a.getOrCreateSMObj=function(e){var t=soclConnect.getSMObjIdKey(e),n=a.getLocalStorageValue(t)||{};return n.clientId&&n.randomNumber||(n.clientId=n.clientId||soclConnect.generateRndGuidV4(),n.randomNumber=n.randomNumber||Math.floor(100*Math.random()+1),a.setLocalStorageValue(t,n)),n},a.getOrCreateSessionHash=function(e){var t="session-guid";return a.getSessionStorageValue(t)||a.setSessionStorageValue(t,a.createSessionHash(e))},a.getPID=function(e,t){var n=soclHelper.getStoreValue("smpid_"+e);null!==n&&""!==n?t(n):setTimeout(function(){0<--o?a.getPID(t):t(0)},1e3)},a.getParamOnSession=function(e){var t=soclHelper.getSessionValue("paramOnSession");null!==t&&""!==t?e(t):setTimeout(function(){0<--g?a.getParamOnSession(e):e("")},1e3)},a.getPurchaseUrl=function(e){var t=soclHelper.getStoreValue("smpurl");null!==t&&""!==t&&"undefined"!==t?e(t.split(",")):setTimeout(function(){0<--d?a.getPurchaseUrl(e):e([])},1e3)},a.getTagsParameter=function(e){var t=soclHelper.getStoreValue("smtp");null!==t&&""!==t&&"undefined"!==t?e(JSON.parse(t)):setTimeout(function(){0<--p?a.getTagsParameter(e):e(new Array)},1e3)},a.getPushEndpoint=function(e){var t=soclHelper.getStoreValue("pushendpoint");null!==t&&""!==t?e(t):setTimeout(function(){0<--r?a.getPushEndpoint(e):e("")},1e3)},a.hasPushOptInBy=function(e,t){var n=soclHelper.getStoreValue("smpushoptin_"+e),o=soclHelper.getStoreValue("smid_"+e);null!==n&&""!==n&&0!=o?t(n):setTimeout(function(){0<--l?a.hasPushOptInBy(e,t):t(!1)},1e3)},a.guidValidation=function(e){return/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(e)},a.hasFBOptIn=function(e){var t=soclHelper.getStoreValue("userConnected");null!==t&&""!==t?e(!0):setTimeout(function(){0<--u?a.hasFBOptIn(e):e(!1)},1e3)},a.getCloseUrl=function(e){var t=soclHelper.getStoreValue("smcloseurl");null!==t&&""!==t&&"undefined"!==t?e(t):setTimeout(function(){0<--f?a.getCloseUrl(e):e("")},1e3)},a.getRedirectUrl=function(e){var t=soclHelper.getStoreValue("smredirecturl");null!==t&&""!==t&&"undefined"!==t?e(t):setTimeout(function(){0<--f?a.getCloseUrl(e):e("")},1e3)},a.getPosition=function(){var e=document.documentElement,t=document.body,n="scrollTop",o="scrollHeight";return percent=(e[n]||t[n])/((e[o]||t[o])-e.clientHeight)*100},a.CGSplitTraffic=function(e,t){var n=new Math.seedrandom;result=n.quick(),result<=e?t(!0):t(!1)},a.userInControlGroup=function(e,t){var n,o;e.cgActive?(n=e.id,o=function(e){a.CGSplitTraffic(e.response.threshold,function(e){t(e)})},getCORS(apiUrl+"/customers/"+n+"/cgsettings/"+E+"?format=json",null,function(e){o(e)}),soclHelper.setSessionValue("controlGroupActive",!0)):t(!1)},a.showPlugin=function(e,t,n){soclHelper.getStoreValue(soclConnect.createSMIdKey(e));var o=soclHelper.getStoreValue(e),r=soclCookie.getCookie("viewedOuibounceModal_"+t);null!==o&&""!==o||"true"===r?n(!1):setTimeout(function(){0<--c?a.showPlugin(e,t,n):n(!0)},1e3)},a.createBaseIframe=function(){var e=document.createElement("iframe");return e.frameBorder="0",e.marginWidth="0",e.marginHeight="0",e.scrolling="no",e.width=1,e.height=1,e},a.injectDiv=function(e,t){if(!document.getElementById(e)){var n=document.createElement("div");n.id=e,n.style.display=t,document.body.insertBefore(n,document.body.childNodes[0])}},a.removeElementById=function(e){document.getElementById(e)&&document.getElementById(e).remove()},a.injectManifest=function(e,t){var n,o=document.getElementsByTagName("script")[0];(n=document.createElement("link")).href=e+t,n.rel="manifest",o.parentNode.insertBefore(n,o)},a.injectCSS=function(e,t){if(!function(e,t,n,o){for(var r=document.getElementsByTagName(e),i=0,s=r.length;i<s;i++)if(r[i][t]==n+o)return!1;return!0}("link","href",e,t))return!1;var n,o=document.getElementsByTagName("script")[0];(n=document.createElement("link")).href=e+t,n.rel="stylesheet",o.parentNode.insertBefore(n,o)},a.injectPAJS=function(e){if(!document.getElementById("pajs")){var t,n=document.getElementsByTagName("script")[0];(t=document.createElement("script")).id="pajs",t.src=b+"pajs.min.js",t.type="text/javascript",n.parentNode.insertBefore(t,n)}var o,r;o=e,r=window.setInterval(function(){try{"undefined"!=typeof Porthole?(window.clearInterval(r),o(!0)):0==--s&&(window.clearInterval(r),o(!1))}catch(e){}},1e3)},a.injectScrollJS=function(){if(!document.getElementById("scroll")){var e,t=document.getElementsByTagName("script")[0];(e=document.createElement("script")).id="scroll",e.src=b+"scroll.min.js",e.type="text/javascript",t.parentNode.insertBefore(e,t)}},a.injectOUIBounce=function(){if(!document.getElementById("pajs_b")){var e,t=document.getElementsByTagName("script")[0];(e=document.createElement("script")).id="pajs_b",e.src=b+"ouibounce.min.js",e.type="text/javascript",t.parentNode.insertBefore(e,t)}},a.injectCrawler=function(e,t){var n="sm_crawler",o="https://static.socialminer.com/customers/"+e+"/crawler/crawler.js";if(document.getElementById(n))t&&setTimeout(t,1);else{function r(){t&&t(),t=null}var i=document.createElement("script");if("undefined"==typeof smCrawler){i.addEventListener("load",r),i.onerror=function(){console.error("Crawler not loaded: ",o),r()},i.id=n,i.type="text/javascript",i.src=o;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}else setTimeout(function(){smCrawler(),r()},1)}},a.insertAddonJs=function(){var e=soclHelper.getStoreValue("smcid");if(e){var t="sm_addon",n="https://static.socialminer.com/custom/"+e+"/custom.js";if(!document.getElementById(t)){var o=document.createElement("script");o.id=t,o.type="text/javascript",o.src=n;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r)}}},a.removeAddonJs=function(){soclHelper.removeElementById("sm_addon")},a.IsGAEnabled=function(e){return null!==e&&""!==e&&"undefined"!==e&&"true"===e},a.checkGA=function(){return"function"==typeof ga},a.convertMS=function(e){var t,n,o;return o=Math.floor(e/1e3),n=Math.floor(o/60),o%=60,t=Math.floor(n/60),n%=60,{day:Math.floor(t/24),hour:t%=24,minute:n,seconds:o,decimalDay:(e/1e3/60/60/24).toFixed(2)}},a.prepareForSPA=function(e,t){y||(void 0===window.socl_checkIsSPA?(window.socl_checkIsSPA=!0,t&&soclHelper.simulateSPA(e)):y=!0)},a.simulateSPA=function(e){var t=history.pushState;history.pushState=function(){t.apply(history,arguments),socl.start(e,1)}},a.setIsSPA=function(){y=!0},a.checkIsSPA=function(){return y},a.initFirebase=function(t){if("undefined"!=typeof firebase)return 0<firebase.apps.length||firebase.initializeApp(w),t(!0);a.importFirebase(function(e){return e&&firebase.initializeApp(w),t(e)})},a.importFirebase=function(t){var e=document.createElement("script");document.head.appendChild(e),e.onload=function(){var e=document.createElement("script");document.head.appendChild(e),e.onload=function(){return t(!0)},e.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-messaging.js"},e.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"}}(soclHelper)},function(e,t){function u(e){return e=soclHelper.contains(e,"&amp;")?soclHelper.replaceAll("&amp;","|",e):soclHelper.replaceAll("&","|",e)}function i(e,t){if(soclHelper.guidValidation(e)){var n=[];t.logs.constructor==String&&(t.logs=JSON.parse(t.logs));for(var o=0;o<t.logs.length;o++)n.push(JSON.stringify({Url:encodeURIComponent(t.logs[o].url),Referrer:encodeURIComponent(t.logs[o].referrer),Date:t.logs[o].date,CustomerId:t.customerId,Price:t.logs[o].metadata?(c=t.logs[o].metadata,(l=c.price||(c.product?c.product.price:""))?u(l):""):"",IsAvailable:void 0!==t.logs[o].metadata.notAvailable?u(t.logs[o].metadata.notAvailable):""}));i=e,s=n,a=t.dbName,d.actionBatch(i,s,function(e){e&&localStorage.removeItem("db_"+a)});try{var r=soclHelper.getOrCreateSMObj(t.customerId);soclHelper.postBehaviors(t.customerId,r.clientId,!0,e)}catch(e){console.log(e)}}var i,s,a,c,l}function a(e,t){var n,o=void 0;switch(e){case p:o=0<(n=document.getElementsByClassName(t)).length?n[0].innerHTML:o;break;case l:var r=document.getElementById(t);o=null!==r?r.innerHTML:o;break;case g:o=0<(n=document.getElementsByTagName(t)).length?n[0].innerHTML:o;break;case f:o=0<(n=document.getElementsByName(t)).length?n[0].innerHTML:o}return o}function s(n,o){soclConnect.getFbId(function(t){0<t?d.setSMIdByFbId(t,n.customerId,function(e){0!==e?o(e,!0):soclConnect.registerConnectedUser(t,n.customerId,5,null,function(e){o(e,!0)})}):o(0,!0)})}function o(e,t,n){"00000000000000000000000000000000"!==t.response.id?(soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t.response.id),soclHelper.setStoreValue("soclId",t.response.id),n(t.response.id)):n(0)}var d,c,r,l,p,f,g,m,h,n,v;window.soclTracking={},d=soclTracking,r="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/tracking/html/",l=5,p=6,f=7,g=8,m=3,h=4,n=function(){(c=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"sm-tracking-iframe")).addEventListener(v)},v=function(s){void 0!==s.data.tracking&&soclHelper.getPurchaseUrl(function(e){!function(e,t){if(0<e.length)for(var n=0;n<e.length;n++)if(o=document.location.href,r=e[n],o=o.replace(/^(http|https):\/\//i,""),r=r.replace(/^(http|https):\/\//i,""),soclHelper.contains(o,r))return t(!0);var o,r;t(!1)}(e,function(e){var o,t=s.data.tracking,n=soclHelper.replaceAll("{0}",t,"logs_{0}"),r=d.getLocalDB(n);if(e){if(r.tableExists("items")){var i=r.queryAll("items");c.post({logs:i,anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:e})}}else o=function(t){null!==t&&(r.tableExists("items")?r.update("items",{ID:r.rowCount("items")},function(e){return m===t.key?e.metadata.price=t.value.replace(/"/g,"").replace(/\s/g,""):e.metadata.notAvailable=t.value,e}):r.createTable("items",["url","referrer","date","metadata"]),r.commit());r.tableExists("items")&&c.post({logs:r.queryAll("items"),anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:e})},soclHelper.getTagsParameter(function(e){e.constructor==String&&(e=JSON.parse(e));for(var t={},n=0;n<e.length;n++){switch(e[n].type){case m:void 0!==a(e[n].rule,e[n].value)&&(t.key=m,t.value=a(e[n].rule,e[n].value));break;case h:void 0!==a(e[n].rule,e[n].value)&&(t.key=h,t.value=a(e[n].rule,e[n].value))}if(void 0!==t.key){o(t);break}}void 0===t.key&&o(null)})})}),void 0!==s.data.smid&&soclConnect.getId(s.data.customerId,function(n){var o=soclHelper.replaceAll("{0}",s.data.customerId,"logs_{0}");if(0==n&&0!=s.data.smid&&(soclHelper.setStoreValue(soclConnect.createSMIdKey(s.data.customerId),s.data.smid),soclHelper.setStoreValue("soclId",s.data.smid)),void 0!==s.data.checkOrganicPushNative&&!0===s.data.checkOrganicPushNative)soclHelper.hasPushOptInBy(s.data.customerId,function(e){var t={customerId:s.data.customerId,logs:d.getLocalDB(o).queryAll("items"),dbName:o};!e&&0==n||i(n,t)});else{var e={customerId:s.data.customerId,logs:d.getLocalDB(o).queryAll("items"),dbName:o};0!==n&&i(n,e)}}),void 0!==s.data.smAnonymousId&&soclConnect.getId(s.data.customerId,function(e){0!==e&&c.post({smAnonymousId:e})}),void 0!==s.data.smUserIdFromPushNative&&c.post({smUserIdFromPushNative:id})},d.getLocalDB=function(e){return new localStorageDB(e,localStorage)},d.createLogDB=function(t){var e="items";try{var n=d.getLocalDB(t),o=["url","referrer","date","metadata","clientId","sessionHash"];if(n.isNew()){n.createTable(e,o),n.commit();var r=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,r)}else n.tableExists(e)||(n.createTable(e,o),n.commit()),n.columnExists(e,"clientId")||(n.alterTable(e,["clientId","sessionHash"]),n.commit());n.tableExists(e)||(n.createTable(e,o),n.commit())}catch(e){console.log("creation of table items error => "+t),localStorage.removeItem("db_"+t)}},d.createEventDB=function(t){var e="items";try{var n=d.getLocalDB(t),o=["sessionHash","event"];if(n.isNew()){n.createTable(e,o),n.commit();var r=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,r)}n.tableExists(e)||(n.createTable(e,o),n.commit())}catch(e){console.log("creation of table items error => "+t),localStorage.removeItem("db_"+t)}},d.insertLogItem=function(t,e){try{var n=d.getLocalDB(t);n.tableExists("items")||d.createLogDB(t),n.insert("items",e),n.commit();var o=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,o)}catch(e){localStorage.removeItem("db_"+t),d.createLogDB(t)}},d.insertEventItem=function(t,e){try{var n=d.getLocalDB(t);n.tableExists("items")||d.createEventDB(t),n.insert("items",e),n.commit();var o=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,o)}catch(e){localStorage.removeItem("db_"+t),d.createEventDB(t)}},d.setSMIdToAnonymousUser=function(e,t){null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},d.setSMIdByUrl=function(e){var t=soclHelper.getQueryStringParams("smuid");null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},d.setSMIdByPush=function(t,e,n){getCORS(apiUrl+"/users/push/?format=json&customerId="+t+"&endpoint="+e,null,function(e){o(t,e,n)})},d.setSMIdByPushOrganic=function(t,e,n){postCORS(apiUrl+"/users/push",{customerId:t,pushEndpoint:e,isMobile:soclHelper.isMobile()},function(e){o(t,e,n)})},d.setSMIdByFbId=function(e,t,n){getCORS(apiUrl+"/users/social/"+e+"/?format=json&customerId="+t,null,function(e){o(t,e,n)})},d.createDataObj=function(e,t,n,o){var r,i;return{soclId:e,url:(r=""===(i=t)||void 0===i?document.referrer:i,r=soclHelper.contains(r,"&amp;")?soclHelper.replaceAll("&amp;","|",r):soclHelper.replaceAll("&","|",r)),referrer:n,customerId:o}},d.actionBatch=function(e,t,n){0<t.length&&postCORS(apiUrl+"/users/"+e+"/action/batch?format=json",{Logs:t},function(e){n(!0)})},d.action=function(e,t){postCORS(apiUrl+"/users/"+e.soclId+"/action/?format=json",{customerId:e.customerId,url:e.url,referrer:e.referrer},function(e){t(!0)})},d.IsParametersOk=function(e){var t=!0;if(!e)return!1;for(var n in e)if(!(t=!!e[n]))return t;return t},d.event=function(c,l){soclHelper.getCID(function(a){0!==a&&soclConnect.getId(a,function(e){if(0!==e){postCORS(apiUrl+"/users/"+e+"/event/?format=json",{customerId:a,eventName:c,parameters:d.IsParametersOk(l)?JSON.stringify(l):JSON.stringify({}),url:document.location.href,referrer:document.referrer},function(e){});try{var t=soclHelper.getOrCreateSMObj(a);soclHelper.postBehaviors(a,t.clientId,!0,e)}catch(e){console.log(e)}}else try{if(c&&c.toLowerCase().includes("purchase")){t=soclHelper.getOrCreateSMObj(a);var n=soclHelper.getCustomerInfoFromLocalStorage(a);n&&t&&n.sendAnonymousData&&soclHelper.isInControlGroup(t.randomNumber,n.baseSizePercent)&&soclHelper.postBehaviors(a,t.clientId,!0)}}catch(e){console.log(e)}try{var o=soclHelper.addOrGetCookieAsList("sm_event_impact"),r=soclHelper.addOrGetCookieAsList("sm_views"),i=soclHelper.categorizeLastClick(o,r);if(i){i.additionalData.Sale=l||{},soclHelper.createEvent(i);var s=soclHelper.replaceAll("-","",a);soclHelper.sendEvents(s,!0)}}catch(e){console.log("SM - Failed on sending Presales event.")}})})},d.logViewToConnectedUser=function(o,r){soclConnect.getId(o.customerId,function(e){var t,n;0!==e?(o.dbName=soclHelper.replaceAll("{0}",o.customerId,"logs_{0}"),"true"==o.pushNativeEnabled?(t=o,n=function(e,t){r(e,t)},soclHelper.hasFBOptIn(function(e){e?soclHelper.hasPushOptInBy(t.customerId,function(e){e?(i(id,t),n(id,!1)):s(t,function(e,t){n(e,t)})}):s(t,function(e,t){n(e,t)})})):s(o,function(e,t){r(e,t)})):s(o,function(e,t){"true"==o.pushNativeEnabled?r(e,t):r(e,!1)})})},d.setPushOptInBy=function(e,t){},d.init=function(o){soclHelper.injectDiv("sm-tracking","none"),function(t){try{n(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){if(e){var t=document.getElementById("sm-tracking");if(null!==t){var n=soclHelper.createBaseIframe();n.setAttribute("src",r+"view.min.html?appId="+o.appId+"&id="+o.id+"&gaEnabled="+o.gaEnabled+"&pushNativeEnabled="+o.isPushNativeEnabled+"&smuid="+soclHelper.getQueryStringParams("smuid")+"&v=106&clientId="+o.clientId+"&sessionHash="+o.sessionHash),n.setAttribute("id","sm-tracking-iframe"),n.setAttribute("name","sm-tracking-iframe"),t.appendChild(n)}}}),soclHelper.setStoreValue("smcid",o.id),soclHelper.setStoreValue("smpurl",o.purchaseUrl),function(e){var t=[];e.constructor==String&&(e=JSON.parse(e));for(var n=0;n<e.length;n++)t.push({type:e[n].type.id,rule:e[n].rule.id,value:e[n].value});soclHelper.setStoreValue("smtp",JSON.stringify(t))}(o.tagsParameter)},d.clearInstance=function(){void 0!==c&&c.removeEventListener(v),soclHelper.removeElementById("sm-tracking")}},function(e,t){function l(r,e,t,n,i){var o=r.split("-").join(""),s=soclHelper.getStoreValue("smid_"+o),a={customerId:r,sourceId:e,facebookId:n,accessToken:t};null!=s&&null!=s&&0!=s&&(a={customerId:r,sourceId:e,facebookId:n,accessToken:t,userPushMessagingId:s});var c=soclHelper.getQueryStringParams("userId");c&&(a.userId=c),postCORS(apiUrl+"/users?format=json",a,function(e){var t=e.response.id;try{if("00000000000000000000000000000000"!==t){a.personId=soclHelper.getStoreValue("smid_"+a.customerId)||t,a.source=a.sourceId,a.channelId=a.channelId||soclHelper.getQueryStringParams("pluginId"),a.device=soclHelper.isMobile()?p:d;var n=soclHelper.extractClientIdFromUrl();n&&(a.clientId=n),a.sessionHash=soclHelper.extractSessionHashFromUrl(),a.sessionHash||(a.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",a,function(e){})}}catch(e){console.log("SM - [URSA] - registerUser - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(u.createSMIdKey(soclHelper.replaceAll("-","",r)),t),soclHelper.setStoreValue("soclId",t);var o=soclTracking.createDataObj(t,document.referrer,document.referrer,r);soclTracking.action(o,function(e){!function(e){"none"!=this.returnUri&&void 0!==this.returnUri?window.location=this.returnUri:e(!0)}(function(e){i(e,t)})})})}function i(n,o){postCORS(apiUrl+"/users/"+n.userId+"?format=json",n,function(e){try{if("00000000000000000000000000000000"!==e.response.id){n.customerId=n.customerId||soclHelper.getQueryStringParams("id"),n.personId=soclHelper.getStoreValue("smid_"+n.customerId)||e.response.id,n.channelId=n.channelId||soclHelper.getQueryStringParams("pluginId"),n.device=soclHelper.isMobile()?p:d;var t=soclHelper.extractClientIdFromUrl();t&&(n.clientId=t),n.sessionHash=soclHelper.extractSessionHashFromUrl(),n.sessionHash||(n.sessionHash=soclHelper.getOrCreateSessionHash()),n.endpoint&&(n.token=n.endpoint),postCORS(wonkaUrl+"/ursa/profiles",n,function(e){o(!0)})}else console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed response from API. Request: ".concat(apiUrl+"/users/"+n.userId+"?format=json")),o(!1)}catch(e){console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed: ".concat(e)),o(!1)}})}var u,o,n,d,p,f,r;window.soclConnect={},u=soclConnect,n=4,d=1,p=o=2,f={Type:{Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.Step.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},r=function(e,t,n){var o=soclHelper.createBaseIframe();o.width=e.getAttribute("data-width"),o.height=e.getAttribute("data-height"),o.setAttribute("src","https://widgets.soclminer.com.br/v2/social/js/widgets/connect/"+t+"/index.html?scope="+e.getAttribute("data-scope")+"&id="+n),e.appendChild(o)},u.generateRndGuid=function(){return uuid.v1()},u.generateRndGuidV4=function(){return uuid.v4()},u.createSMIdKey=function(e){return"smid_"+soclHelper.replaceAll("-","",e)},u.getSMObjIdKey=function(e){return"smObj-"+soclHelper.replaceAll("-","",e)},u.render=function(e){var t=e.featureSettings.folderName,n=document.getElementsByClassName("sm-connect");null!==n&&0<n.length&&function(e,t,n){for(var o=0;o<e.length;o++)r(e[o],t,n)}(n,t,e.id)},u.signIn=function(n,o,e,r,i){this.scope="email,public_profile";var s=soclHelper.getQueryStringParams("pluginId"),a=0;try{var t=document.location.href.split("social/");(t=t[1].split("/"))&&0<t.length&&(a=t[0])}catch(e){console.log("SM - [URSA] - signIn - Failed while spliting URL: ".concat(e))}try{var c={type:f.Type.Channel_Step_View,step:f.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s};c.channelId&&soclBounce.createEventProxy(c)}catch(e){console.log("SM - [URSA] - signIn - Failed while sending event: ".concat(e))}u.fbEnsureInit(function(e){null!==e&&FB.login(function(e){if(e.authResponse){"none"!=r&&(this.returnUri=r);try{if(e.authResponse.grantedScopes)if(e.authResponse.grantedScopes.includes("email"))(t={type:f.Type.Channel_Step_Conclusion,step:f.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s||soclHelper.getQueryStringParams("pluginId"),customerId:n}).channelId&&soclBounce.createEventProxy(t);else(t={type:f.Type.Channel_Step_ConclusionWithRejection,step:f.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s,customerId:n}).channelId&&soclBounce.createEventProxy(t)}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}l(n,o,e.authResponse.accessToken,e.authResponse.userID,function(e){i(e)})}else{try{var t;(t={type:f.Type.Channel_Step_Rejection,step:f.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s,customerId:n}).channelId&&soclBounce.createEventProxy(t)}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}i(!1)}},{scope:"email,public_profile",return_scopes:!0})})},u.signInWithMail=function(r,i){postCORS(apiUrl+"/users?format=json",r,function(e){var t=e.response.id;try{if("00000000000000000000000000000000"!==t){r.personId=t,r.channelId=r.channelId||soclHelper.getQueryStringParams("pluginId"),r.device=soclHelper.isMobile()?p:d;var n=soclHelper.extractClientIdFromUrl();n&&(r.clientId=n),r.sessionHash=soclHelper.extractSessionHashFromUrl(),r.sessionHash||(r.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",r,function(e){})}}catch(e){console.log("SM - [URSA] - signInWithMail - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(u.createSMIdKey(soclHelper.replaceAll("-","",r.customerId)),t),soclHelper.setStoreValue("soclId",t);var o=soclTracking.createDataObj(t,r.url,r.referrer,r.customerId);soclTracking.action(o,function(e){i(e)})})},u.signInOrganic=function(e,r,t,i){if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.email.value)&&r){var s={};s.Email=e.email.value,s.SourceId=t,s.CustomerId=r,e.firstName&&(s.FirstName=e.firstName.value),e.lastName&&(s.LastName=e.lastName.value),e.pictureUrl&&(s.PictureUrl=e.pictureUrl.value),e.gender&&(s.Gender=e.gender.value),e.locale&&(s.Locale=e.locale.value),e.timezone&&(s.Timezone=e.timezone.value),e.phone&&(s.Phone=e.phone.value),postCORS(apiUrl+"/users?format=json",s,function(e){var t=e.response.id;try{if("00000000000000000000000000000000"!==t){s.personId=t,s.device=s.deviceType||null,s.channelId=s.channelId||soclHelper.getQueryStringParams("pluginId"),s.device=soclHelper.isMobile()?p:d;var n=soclHelper.extractClientIdFromUrl();n&&(s.clientId=n),s.sessionHash=soclHelper.extractSessionHashFromUrl(),s.sessionHash||(s.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",s,function(e){})}}catch(e){console.log("SM - [URSA] - signInOrganic - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(u.createSMIdKey(soclHelper.replaceAll("-","",r)),t),soclHelper.setStoreValue("soclId",t);var o=soclTracking.createDataObj(t,document.URL,document.referrer,r);soclTracking.action(o,function(e){i()})})}},u.updateOrganic=function(e,t,n,o){if(t&&n){var r={};r.userId=n,r.customerId=t,e.email&&(r.Email=e.email.value),e.firstName&&(r.FirstName=e.firstName.value),e.gender&&(r.Gender=e.gender.value),e.phone&&(r.Phone=e.phone.value),i(r,function(e){o()})}},u.signInWithPush=function(o,e,t,n,r,i){if(t&&!soclHelper.getStoreValue("pushendpoint")){var s=soclHelper.getStoreValue("smid_"+o);s&&!/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(s)&&(soclHelper.removeStoreValue("smid_"+o),r(!1));var a={customerId:o,sourceId:e,endpoint:t,deviceType:n},c=soclHelper.getQueryStringParams("userId");c?a.userId=c:s&&0!=s&&(a.userPushMessagingId=s),postCORS(apiUrl+"/users?format=json",a,function(e){var t=e.response.id;try{if("00000000000000000000000000000000"!==t){a.personId=t,a.token=a.endpoint,a.channelId=a.channelId||i,a.device=soclHelper.isMobile()?p:d;var n=soclHelper.extractClientIdFromUrl();n&&(a.clientId=n),a.sessionHash=soclHelper.extractSessionHashFromUrl(),a.sessionHash||(a.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",a,function(e){})}}catch(e){console.log("SM - [URSA] - signInWithPush - POST Wonka/ursa/profiles. Failed: ".concat(e))}t=e.response.id;soclHelper.setStoreValue(u.createSMIdKey(soclHelper.replaceAll("-","",o)),t),soclHelper.setStoreValue("soclId",t),r(t)})}},u.registerAnonymousUser=function(n,o,e,r){var i=soclHelper.getStoreValue(u.createSMIdKey(soclHelper.replaceAll("-","",n)));null==i&&""==i||postCORS(apiUrl+"/users/"+o+"/anonymous?format=json",{customerId:n,userId:o,isControlGroup:e},function(e){soclHelper.setStoreValue(i,o);var t=soclTracking.createDataObj(o,document.location.href,document.referrer,n);soclTracking.action(t,function(e){r(e)})})},u.registerConnectedUser=function(t,n,o,e,r){0<t?u.getFbCurrentAccessToken(function(e){""!==e?l(n,o,e,t,function(e,t){r(t)}):r(!1)}):r(!1)},u.updateConnectedUser=function(e,t){i(e,function(e){t(e)})},u.getGuidPersonId=function(e,t){getCORS(wonkaUrl+"/ursa/profiles/base32/from/"+e,null,function(e){t(e.value)})},u.userExists=function(t,n){u.getFbId(function(e){0<e?getCORS(apiUrl+"/users/social/"+e+"/?format=json&customerId="+t,null,function(e){"00000000000000000000000000000000"!==e.response.id?n(!0):n(!1)}):n(!1)})},u.getId=function(e,t){var n=soclHelper.getStoreValue(u.createSMIdKey(e));null!==n&&""!==n?t(n):setTimeout(function(){0<--o?u.getId(e,t):t(0)},1e3)},u.getStatus=function(t){u.fbEnsureInit(function(e){null!==e&&FB.getLoginStatus(function(e){"connected"===e.status?t(!0):(e.status,t(!1))})})},u.getFbCurrentAccessToken=function(t){u.fbEnsureInit(function(e){null!==e&&FB.getLoginStatus(function(e){"connected"===e.status?t(e.authResponse.accessToken):t("")})})},u.getFbId=function(t){u.fbEnsureInit(function(e){null!==e?FB.getLoginStatus(function(e){"connected"===e.status?t(e.authResponse.userID):t(0)}):t(0)})},u.getFbPermissions=function(t){u.fbEnsureInit(function(e){null!==e&&FB.api("/me/permissions",function(e){t(e)})})},u.fbEnsureInit=function(e){window.fbApiInit?e&&e():setTimeout(function(){0<--n?u.fbEnsureInit(e):e(null)},1e3)},u.fbSettings=function(e,t){var n,o,r,i;"undefined"==e&&(e=void 0),e&&(this.appId=e,this.channelUrl=t,window.fbAsyncInit=function(){FB.init({appId:e,channelUrl:void 0,status:!0,cookie:!0,xfbml:!0,version:"v2.12"}),fbApiInit=!0},n=document,o="facebook-jssdk",i=n.getElementsByTagName("script")[0],n.getElementById(o)||((r=n.createElement("script")).id=o,r.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i)),function(){if(!document.getElementById("fb-root")){var e=document.createElement("div");e.id="fb-root",document.body.insertBefore(e,document.body.childNodes[0])}}())}},function(e,t){var n,o,C;function w(e){if(void 0!==e.paramOnSession&&""!==e.paramOnSession){var t=soclHelper.getSessionValue("paramOnSession");null!==t&&""!==t?t+="|"+e.paramOnSession:t=e.paramOnSession,soclHelper.setSessionValue("paramOnSession",t)}}window.socl={},n=socl,o=20,C={Presales_Impact:"Presales.Impact"},n.inject=function(e){var t,n=document.getElementsByTagName("script")[0];(t=document.createElement("script")).src=e,n.parentNode.insertBefore(t,n)},n.execute=function(){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",setTimeout(function(){if(o--,"undefined"!=typeof soclTracking)window.soclInit();else{if(!(0<o))return;n.execute()}},2e3)},n.emmit={onView:function(e){e.event="view",n.onView&&n.onView(e)},onClick:function(e){e.event="click",n.onClick&&n.onClick(e)},onClose:function(e){e.event="close",n.onClose&&n.onClose(e)},onEvent:function(e){n.onEvent&&n.onEvent(e)}},n.refresh=function(e){e&&(soclPush.clearInstance(),soclBounce.clearInstance(),soclOnsiteSales.clearInstance(),soclTracking.clearInstance(),soclHelper.removeAddonJs(),soclHelper.setIsSPA(),n.start(e))},n.start=function(v){if(v&&(e=v,!(window.socl_BlackList&&-1<window.socl_BlackList.indexOf(e)))){var e;this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1";var S=soclHelper.getStoreValue(soclConnect.createSMIdKey(v));if(S&&!soclHelper.guidValidation(S)){var t=soclHelper.replaceAll("-","",v);soclHelper.removeStoreValue(soclConnect.createSMIdKey(v)),soclHelper.removeStoreValue("smpushoptin_"+t),soclHelper.removeStoreValue(t)}if(soclHelper.existsUrlWithPersonId()&&!S){var n=soclHelper.getPersonIdFromUrl();if(!n)return;soclConnect.getGuidPersonId(n,function(e){if(e){var t=soclHelper.replaceAll("-","",e);soclHelper.setStoreValue(soclConnect.createSMIdKey(v),t)}})}var I=soclHelper.getOrCreateSMObj(v),y=soclHelper.getOrCreateSessionHash(v),o=encodeURIComponent(document.location.href);soclHelper.getCustomerInfo(v,o,function(e){if(void 0!==e.response){var t={id:e.response.id,appId:e.response.appId,name:e.response.name,dns:e.response.customDNS,forceRedirect:e.response.forceRedirect,gaEnabled:e.response.gaEnabled,cgActive:e.response.cgActive,purchaseUrl:e.response.purchaseUrl,pageId:e.response.facebookPageId,featureSettings:{folderName:"",pluginParameters:"",pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},isPushNativeEnabled:!1,timeInSite:0,googleApp:2,sendAnonymousData:e.response.sendAnonymousData,baseSizePercent:e.response.baseSizePercent,features:e.response.features};t.clientId=I.clientId,t.sessionHash=y,soclHelper.setCustomerInfoToLocalStorage(t);var n=e.response.features.find(function(e){return"f4456763b8cb412a9e5cf2a11f2b6222"==e.feature.id});if(n&&5===n.pluginTypeId){var o=JSON.parse(n.pluginParameters);t.isPushNativeEnabled=o.native,t.googleApplicationId=o.GoogleAppTypeId,t.daysToShowAfterView=o.daysToShowAfterView,t.timeInSite=o.TimeInSite,t.googleApplicationId&&(t.googleApp=t.googleApplicationId)}soclHelper.removeSessionValue("paramOnSession");for(var r=0;r<e.response.features.length;r++)switch(t.featureSettings={folderName:e.response.features[r].folderName,pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},e.response.features[r].feature.id){case"ce48903b935c436f8c696585e8df1f36":var i=soclHelper.replaceAll("-","",v),s=soclHelper.replaceAll("{0}",i,"logs_{0}");soclTracking.createLogDB(s),soclTracking.createEventDB("events_"+i);try{var a=document.location.href,c=document.location.search.substr(1),l=soclHelper.urlContainsSpecificParams(c);if(l){l.create_date=soclHelper.getNow(),l.path=window.location.pathname;var u=soclHelper.addOrGetCookieAsList("sm_event_impact",l);if(soclCookie.createCookie("sm_event_impact",JSON.stringify(u),60),"smid"in l){var d={type:C.Presales_Impact,additionalData:{Impact:u,Sale:{}}};soclHelper.createEvent(d)}}}catch(e){console.log("SM - Failed on getting URL query string params.",a)}try{soclHelper.sendEvents(i)}catch(e){console.log("SM - Failed on sending events.",e)}soclHelper.injectCrawler(v,function(){var e={url:document.location.href,referrer:document.referrer,date:soclHelper.getNow(),metadata:soclHelper.getMetadata(),sessionHash:soclHelper.getSessionHash(),clientId:I.clientId};if(soclTracking.insertLogItem(s,e),!S&&t.sendAnonymousData&&soclHelper.isInControlGroup(I.randomNumber,t.baseSizePercent))try{soclHelper.postBehaviors(v,I.clientId)}catch(e){console.log(e)}}),t.tagsParameter=e.response.tagsParameter,soclTracking.init(t);break;case"f4456763b8cb412a9e5cf2a11f2b6222":case"6fb5edd41bda496593802a9d0acf8595":var p=e.response.features[r];w(p);var f=JSON.parse(JSON.stringify(t));if(p.pluginId)f.featureSettings.pluginTypeId=p.pluginTypeId,f.featureSettings.pluginId=p.pluginId,f.featureSettings.version=p.version,0<f.timeInSite?setTimeout(function(){soclPush.render(f)},1e3*f.timeInSite):soclPush.render(f);else{soclHelper.injectDiv("sm-push-tracking","none");var g=document.getElementById("sm-push-tracking");soclHelper.hasPushOptInBy(f.id,function(e){soclPush.createPushTrackingIFrame(f,e,g)})}break;case"89981d318e7f4fa9bf267e5498ac6688":if(w(e.response.features[r]),e.response.features[r].pluginId&&t.appId){t.featureSettings.pluginTypeId=e.response.features[r].pluginTypeId,t.featureSettings.pluginId=e.response.features[r].pluginId,t.featureSettings.version=e.response.features[r].version,t.featureSettings.pluginParameters=e.response.features[r].pluginParameters,t.featureSettings.storyId=e.response.features[r].storyId;var m=parseInt(soclHelper.getSessionValue("pagesview_"+t.featureSettings.pluginId));isNaN(m)?soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,1):(m+=1,soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,m)),soclBounce.render(JSON.parse(JSON.stringify(t)))}break;case"3f1df6d723414bb9bc2e23ccb33e8d8b":w(e.response.features[r]),e.response.features[r].pluginId&&(t.featureSettings.pluginTypeId=e.response.features[r].pluginTypeId,t.featureSettings.pluginId=e.response.features[r].pluginId,t.featureSettings.version=e.response.features[r].version),soclOnSite.render(JSON.parse(JSON.stringify(t)));break;case"5491c86eda73474a907c6e4adb18ee99":if(w(e.response.features[r]),e.response.features[r].pluginId){var h=e.response.features[r];t.featureSettings.pluginTypeId=h.pluginTypeId,t.featureSettings.pluginId=h.pluginId,t.featureSettings.version=h.version,t.featureSettings.pluginParameters=soclHelper.formatUrlPipe(h.pluginParameters),t.featureSettings.startDate=h.startDate,t.featureSettings.endDate=h.endDate;m=parseInt(soclHelper.getSessionValue("pagesview_"+t.featureSettings.pluginId));isNaN(m)?soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,1):(m+=1,soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,m))}soclOnsiteSales.render(JSON.parse(JSON.stringify(t)))}soclHelper.insertAddonJs()}})}},function(){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",this.wonkaUrl="https://"+soclHelper.getEnvironment()+"wonka.socialminer.com",socl.execute()}(document)},function(e,t){!function(i){"use strict";function s(){}var a=!1,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,l={debug:!(s.extend=function(e){var r=this.prototype;a=!0;var t=new this;for(var n in a=!1,e)t[n]="function"==typeof e[n]&&"function"==typeof r[n]&&c.test(e[n])?function(n,o){return function(){var e=this._super;this._super=r[n];var t=o.apply(this,arguments);return this._super=e,t}}(n,e[n]):e[n];function o(){!a&&this.init&&this.init.apply(this,arguments)}return((o.prototype=t).constructor=o).extend=s.extend,o}),trace:function(e){this.debug&&void 0!==i.console&&i.console.log("Porthole: "+e)},error:function(e){i.console,"function"==typeof i.console.error&&i.console.error("Porthole: "+e)},WindowProxy:function(){}};l.WindowProxy.prototype={post:function(e,t){},addEventListener:function(e){},removeEventListener:function(e){}},l.WindowProxyBase=s.extend({init:function(e){void 0===e&&(e=""),this.targetWindowName=e,this.origin=i.location.protocol+"//"+i.location.host,this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return l.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(e,t){void 0===t&&(t="*"),this.dispatchMessage({data:e,sourceOrigin:this.getOrigin(),targetOrigin:t,sourceWindowName:i.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(e){return this.eventListeners.push(e),e},removeEventListener:function(e){var t;try{t=this.eventListeners.indexOf(e),this.eventListeners.splice(t,1)}catch(e){this.eventListeners=[]}},dispatchEvent:function(e){var t;for(t=0;t<this.eventListeners.length;t++)try{this.eventListeners[t](e)}catch(e){l.error(e)}}}),l.WindowProxyLegacy=l.WindowProxyBase.extend({init:function(e,t){this._super(t),null!==e?(this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=e,this.proxyIFrameElement=this.createIFrameProxy()):(this.proxyIFrameElement=null,l.trace("proxyIFrameUrl is null, window will be a receiver only"),this.post=function(){throw new Error("Receiver only window")})},createIFrameProxy:function(){var e=document.createElement("iframe");return e.setAttribute("id",this.proxyIFrameName),e.setAttribute("name",this.proxyIFrameName),e.setAttribute("src",this.proxyIFrameLocation),e.setAttribute("frameBorder","1"),e.setAttribute("scrolling","auto"),e.setAttribute("width",30),e.setAttribute("height",30),e.setAttribute("style","position: absolute; left: -100px; top:0px;"),e.style.setAttribute&&e.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(e),e},dispatchMessage:function(e){var t=i.encodeURIComponent;if(this.proxyIFrameElement){var n=this.proxyIFrameLocation+"#"+t(l.WindowProxy.serialize(e));this.proxyIFrameElement.setAttribute("src",n),this.proxyIFrameElement.height=50<this.proxyIFrameElement.height?50:100}}}),l.WindowProxyHTML5=l.WindowProxyBase.extend({init:function(e,t){this._super(t),this.eventListenerCallback=null},dispatchMessage:function(e){this.getTargetWindow().postMessage(l.WindowProxy.serialize(e),e.targetOrigin)},addEventListener:function(e){if(0===this.eventListeners.length){var t=this;i.addEventListener?(this.eventListenerCallback=function(e){t.eventListener(t,e)},i.addEventListener("message",this.eventListenerCallback,!1)):i.attachEvent&&(this.eventListenerCallback=function(e){t.eventListener(t,i.event)},i.attachEvent("onmessage",this.eventListenerCallback))}return this._super(e)},removeEventListener:function(e){this._super(e),0===this.eventListeners.length&&(i.removeEventListener?i.removeEventListener("message",this.eventListenerCallback):i.detachEvent&&(void 0===i.onmessage&&(i.onmessage=null),i.detachEvent("onmessage",this.eventListenerCallback)),this.eventListenerCallback=null)},eventListener:function(e,t){var n=l.WindowProxy.unserialize(t.data);!n||""!==e.targetWindowName&&n.sourceWindowName!=e.targetWindowName||e.dispatchEvent(new l.MessageEvent(n.data,t.origin,e))}}),i.postMessage?(l.trace("Using built-in browser support"),l.WindowProxy=l.WindowProxyHTML5.extend({})):(l.trace("Using legacy browser support"),l.WindowProxy=l.WindowProxyLegacy.extend({})),l.WindowProxy.serialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(e)},l.WindowProxy.unserialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole unserialization dependens on JSON!");try{var t=JSON.parse(e)}catch(e){return!1}return t},l.WindowProxy.getTargetWindow=function(e){return""===e?parent:"top"===e||"parent"===e?i[e]:i.frames[e]},l.MessageEvent=function(e,t,n){this.data=e,this.origin=t,this.source=n},l.WindowProxyDispatcher={forwardMessageEvent:function(e){var t,n,o,r=i.decodeURIComponent;0<document.location.hash.length&&(t=l.WindowProxy.unserialize(r(document.location.hash.substr(1))),n=l.WindowProxy.getTargetWindow(t.targetWindowName),(o=l.WindowProxyDispatcher.findWindowProxyObjectInWindow(n,t.sourceWindowName))?o.origin===t.targetOrigin||"*"===t.targetOrigin?o.dispatchEvent(new l.MessageEvent(t.data,t.sourceOrigin,o)):l.error("Target origin "+o.origin+" does not match desired target of "+t.targetOrigin):l.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(e,t){var n;if(e)for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{if(null!==e[n]&&"object"==typeof e[n]&&e[n]instanceof e.Porthole.WindowProxy&&e[n].getTargetWindowName()===t)return e[n]}catch(e){}return null},start:function(){i.addEventListener?i.addEventListener("resize",l.WindowProxyDispatcher.forwardMessageEvent,!1):i.attachEvent&&"undefined"!==i.postMessage||document.body.attachEvent?i.attachEvent("onresize",l.WindowProxyDispatcher.forwardMessageEvent):l.error("Cannot attach resize event")}},i.soclPorthole=l}("undefined"!=typeof window?window:this)},function(e,t){function l(e,t){var n=new XMLHttpRequest;try{return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}catch(e){}}function r(e){var t="";for(key in e)t=t+"&"+key+"="+e[key];return t=t.substr(1,t.length)}function u(e){return soclHelper.guidValidation(soclHelper.replaceAll("-","",e))}window.getCORS=function(e,t,n){var o=l("GET",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},o.send())},window.postCORS=function(e,t,n){var o=l("POST",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))};function d(e){return!(e&&!u(e))}window.postJsonCORS=function(e,t,n){if(t&&(t.events&&t.events.length||t.behaviors&&t.behaviors.length)){if(t.events)for(var o=0;o<t.events.length;o++){var r=t.events[o];if(!((i=r).type&&u(i.customerId)&&d(i.personId)&&d(i.channelId)&&d(i.clientId)||(console.error("invalid event"),console.log(i),0)))return}var i,s;if(t.behaviors)for(o=0;o<t.behaviors.length;o++){var a=t.behaviors[o];if(!(d((s=a).customerId)&&d(s.personId)&&d(s.clientId)||(console.error("invalid behavior"),console.log(s),0)))return}var c=l("POST",e);c&&(c.onreadystatechange=function(){4==c.readyState&&""!==c.responseText&&n&&n(JSON.parse(c.responseText),"success")},c.onerror=function(){},c.setRequestHeader("Content-type","application/json;charset=UTF-8"),c.send(JSON.stringify(t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))}},window.putCORS=function(e,t,n){var o=l("PUT",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))},window.deleteCORS=function(e,t,n){var o=l("DELETE",e);o&&(o.onreadystatechange=function(){4==o.readyState&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))}},function(e,t){var l;window.soclPerfCounter={},(l=soclPerfCounter).type={Click:1,View:2,Impression:3,PushBlocked:7,PushErrorWhileGetToken:8},l.event=function(e,t,n,o){var r,i,s,a,c={pluginId:e,actionTypeId:t,pluginTypeId:n,customerId:o};r=c,i=function(e){},postCORS(apiUrl+"/plugins/"+r.pluginId+"/performance/"+r.actionTypeId+"?format=json",{pluginTypeId:r.pluginTypeId,customerId:r.customerId},function(e){i(!0)}),t===l.type.Click&&(s=c,a=function(e){},postCORS(apiUrl+"/plugins/"+s.pluginId+"/performance/abtest?format=json",{pluginTypeId:s.pluginTypeId,customerId:s.customerId},function(e){a(!0)}))}},function(e,t){window.soclBounce={},function(t){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};function n(r){soclHelper.injectDiv("sm-bounce","none");var i=document.getElementById("sm-bounce");soclHelper.showPlugin(r.id,l,function(e){if(e)soclHelper.userInControlGroup(r,function(e){e?soclConnect.registerAnonymousUser(r.id,soclConnect.generateRndGuid(),!0,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!0,Active:e}))}):function(e,t){f.Step.OS_LightBox=f.Step.OS_LightBox.replace("0",e),f.Step.OS_LightBox_Email=f.Step.OS_LightBox_Email.replace("0",e),f.Step.OS_LightBox_FBConnect=f.Step.OS_LightBox_FBConnect.replace("0",e),e===v?soclHelper.injectCSS(h,"socialbounce.min.css"):e===S||e===I?soclHelper.injectCSS(h,"bounce-survey.min.css"):e===y||e===C||e===w||e===b||e===w||e===b?soclHelper.injectCSS(h,"plugin-lightbox.min.css"):soclHelper.injectCSS(h,"bounce-image.min.css");try{_(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(s=r.featureSettings.pluginTypeId,function(e){if(e){if(a=r.featureSettings.pluginId,c=r.id,l=r.featureSettings.storyId,g=r.forceRedirect,m=soclHelper.replaceAll("{CID}",soclHelper.toGUID(r.id),m),m=soclHelper.replaceAll("{PTID}",s,m),m=soclHelper.replaceAll("{PID}",r.featureSettings.pluginId,m),i.innerHTML=(o='<iframe src="'+m+"/index.html?scope=&id="+(n=r).id+"&pluginId="+n.featureSettings.pluginId+"&gaEnabled="+n.gaEnabled+"&version="+n.featureSettings.version+"&clientId="+n.clientId+"&sessionHash="+n.sessionHash+soclHelper.getSMIDToIFrameSrc(n.id)+'" name="social-lightBox-iframe" scrolling="no" frameborder="0" allowtransparency="true" id="social-lightBox-iframe"></iframe>',n.featureSettings.pluginTypeId===v?'<div id="SocialLightbox">'+o+'</div><div id="SocialLightboxBlock"></div>':n.featureSettings.pluginTypeId===S||n.featureSettings.pluginTypeId===I?'<div id="BounceSurveyBox">'+o+'</div><div id="BounceSurvey"></div>':n.featureSettings.pluginTypeId===y?'<div id="LightBoxTextBox">'+o+'</div><div id="LightBoxText"></div>':n.featureSettings.pluginTypeId===C?'<div id="LightBoxImageBox">'+o+'</div><div id="LightBoxImage"></div>':n.featureSettings.pluginTypeId===w?'<div id="LightBoxTextBox">'+o+'</div><div id="LightBoxText"></div>':n.featureSettings.pluginTypeId===b?'<div id="LightBoxImageBox">'+o+'</div><div id="LightBoxImage"></div>':'<div id="BounceImageBox1">'+o+'</div><div id="BounceImageBlock1" style="display: block;"></div>'),null!=(d=r.featureSettings.pluginParameters)){d=JSON.parse(d);var t=soclHelper.convertMS(d.TimeToShowAfterClose);i.setAttribute("daysToExpire",t.decimalDay)}soclHelper.setStoreValue("smpid_"+s,r.featureSettings.pluginId),setTimeout(function(){x("on",1)},7e3)}var n,o})});else{var t=JSON.parse(soclHelper.getStoreValue("smanonymous"));null===t||""===t||r.cgActive||(t.Active?(t.Active=!1,soclHelper.setStoreValue("smanonymous",JSON.stringify(t)),soclHelper.removeSessionValue("controlGroupActive")):(soclHelper.removeStoreValue("smanonymous"),soclHelper.removeStoreValue(soclConnect.createSMIdKey(r.id))))}})}var s,a,c,l,u,o,d,p=10,e=null,f={Type:{Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.Step.ConclusionWithRejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox:"OS.LightBox.0",OS_LightBox_Email:"OS.LightBox.0.Email",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},g=!1,r=0,m="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/client/{CID}/social/{PTID}/{PID}",h="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",v=1,S=10,I=11,y=12,C=13,w=14,b=15,E=0,H=7,P=1,O=!1,_=function(){(e=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-lightBox-iframe")).addEventListener(k)},k=function(e){if("on"==e.data.activeBounce){var t=document.getElementById("sm-bounce");null!=t&&T(t)}if("on"==e.data.closeAndRedirect&&soclHelper.getCloseUrl(function(e){if(""!==e){try{var t=[];for(t.push({type:f.Type.Channel_ConclusionWithRejection,step:f.Step.OS_LightBox,channelId:a}),i=0;i<t.length;i++)t[i].channelId&&soclHelper.createEvent(t[i])}catch(e){console.log(e)}soclBounce.closeBox(!1,"2"),window.location.href=e}else soclBounce.closeBox(!1,"2")}),"on"==e.data.close)if(null!==soclHelper.getSessionValue("controlGroupActive")&&""!==soclHelper.getSessionValue("controlGroupActive"))soclHelper.getCID(function(e){soclConnect.registerAnonymousUser(e,soclConnect.generateRndGuid(),!1,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!1,Active:e})),soclBounce.closeBox(!0,"1")})});else{try{(o={type:f.Type.Channel_Rejection,step:f.Step.OS_LightBox,channelId:a}).channelId&&soclHelper.createEvent(o)}catch(e){console.log(e)}soclBounce.closeBox(!1,"1")}if(void 0!==e.data.userConnected&&soclHelper.setStoreValue(e.data.userConnected,"connected"),void 0!==e.data.click&&(soclCookie.createCookie("smClickBounce",!0,3),soclHelper.setStoreValue("smInteractBounce_"+l,!0),socl.emmit.onClick({id:a,type:"bounce-1"})),"on"==e.data.concluded){soclHelper.getRedirectUrl(function(e){socl.emmit.onClick({id:a,type:"bounce-2"}),window.location.href=e});try{var n=[];for(n.push({type:f.Type.Channel_Conclusion,step:f.Step.OS_LightBox,channelId:a}),i=0;i<n.length;i++)n[i].channelId&&soclHelper.createEvent(n[i])}catch(e){console.log(e)}}if(void 0!==e.data.loaded&&x(e.data.loaded,1e3),void 0!==e.data.createEvent)try{var o;(o=e.data.createEvent).channelId&&soclHelper.createEvent(o)}catch(e){console.log(e)}},x=function(n,e){if(r<e){r=e;var t=[];"on"!==n&&t.push(encodeURIComponent(n)),g&&t.push(encodeURIComponent(document.location.href)),soclHelper.formatUrlBy(a,s,t,function(e){var t=0;"on"!==n&&soclHelper.setStoreValue("smredirecturl",e.url[t++]),g&&soclHelper.setStoreValue("smcloseurl",e.url[t++])})}},T=function(e){var r,n=soclHelper.getStoreValue("smViewBounce_"+l);if(soclHelper.isMobile()||d.DeviceType!=H){d.DeviceType==E||isNaN(d.DeviceType)||!isNaN(n)&&(n<d.PluginViewBefore||soclHelper.getStoreValue("smInteractBounce_"+l))?r=e.getAttribute("daysToExpire"):(r=soclHelper.convertMS(d.TimeToShowIfNoHaveInteraction).decimalDay,soclHelper.removeStoreValue("smViewBounce_"+l),soclHelper.removeStoreValue("smInteractBounce_"+l)),null==r&&(r=3);var t=window.setInterval(function(){try{if("undefined"!=typeof soclOuibounce){window.clearInterval(t);var o={};o.create_date=soclHelper.getNow(),o.path=window.location.pathname,o.smid="4-10",u=soclOuibounce(e,{displayBounce:d.DisplayType!=P,sensitivity:20,cookieExpire:r,timer:500,delay:200,sitewide:!0,cookieName:"viewedOuibounceModal_"+l,callback:function(){if(document.getElementById("sm-bounce")){screen.height<600&&window.scrollTo(0,0),null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag(),null!==document.getElementById("sm-push")&&"block"==window.getComputedStyle(document.getElementById("sm-push")).display&&(document.getElementById("sm-push").style.display="none",O=!0),soclHelper.computePluginHit(soclPerfCounter.type.View,s),isNaN(n)?soclHelper.setStoreValue("smViewBounce_"+l,1):(n+=1,soclHelper.setStoreValue("smViewBounce_"+l,n)),soclCookie.createCookie("smViewBounce",!0,r),o.kind="view";var e=soclHelper.addOrGetCookieAsList("sm_views",o);soclCookie.createCookie("sm_views",JSON.stringify(e),60);try{var t={type:f.Type.Channel_View,step:f.Step.OS_LightBox,channelId:a};t.channelId&&soclHelper.createEvent(t)}catch(e){console.log(e)}socl.emmit.onView({id:a,type:"bounce"}),0}else soclCookie.createCookie("viewedOuibounceModal_"+l,null,0)},onBeforeShow:function(){var e=!1;if(soclCookie.getCookie("smViewBounce"))e=!0;else if(soclHelper.isInSuppressionGroup(c,a)){soclCookie.createCookie("smViewBounce",!0,r),o.kind="suppression";var t=soclHelper.addOrGetCookieAsList("sm_views",o);soclCookie.createCookie("sm_views",JSON.stringify(t),60);try{e=!0;var n={type:f.Type.Channel_Suppression,step:f.Step.OS_LightBox,channelId:a};soclHelper.createEvent(n)}catch(e){console.log(e)}}return e}})}else 0==--p&&window.clearInterval(t)}catch(e){}},1e3);(soclHelper.isMobile()&&d.DeviceType==H&&soclHelper.getSessionValue("pagesview_"+a)>=d.PagesViewBefore||d.DisplayType==P&&soclHelper.getSessionValue("pagesview_"+a)>=d.PagesViewBefore)&&(0<d.ScrollPercentage&&document.addEventListener("scroll",A),0<d.TimeInSite&&(o=window.setTimeout(function(){soclCookie.getCookie("viewedOuibounceModal_"+l)||void 0===u||u.fire()},d.TimeInSite)))}},A=function(e){soclCookie.getCookie("viewedOuibounceModal_"+l)||void 0===u||parseInt(soclHelper.getPosition())>=parseInt(d.ScrollPercentage)&&u.fire()};t.closeBox=function(e,t){if(null!==document.getElementById("sm-bounce")){var n="bounce";"undefined"!=t&&null!=t&&""!=t&&(n+="-"+t),document.getElementById("sm-bounce").SoclRemoveTag(),e||(socl.emmit.onClose({id:a,type:n}),soclCookie.createCookie("smCloseBounce",!0,3),soclHelper.setStoreValue("smInteractBounce",!0)),O&&null!==document.getElementById("sm-push")&&"2"!=t&&(document.getElementById("sm-push").style.display="block",O=!1)}},t.addKeydownEvent=function(){document.onkeydown=function(e){27==(e=e||window.event).keyCode&&t.closeBox(!1,"escape")}},t.render=function(e){navigator.cookieEnabled&&n(e)},t.createEventProxy=function(e){windowProxy.post({createEvent:e})},t.clearInstance=function(){e&&e.removeEventListener(k),o&&clearTimeout(o),u&&u.destroy(),document.removeEventListener("scroll",A),soclHelper.removeElementById("sm-bounce")}}(soclBounce)},function(e,t,n){(function(C){window.soclPush={},function(a){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var e=null,r=null,h={Ping_PushProfile:"Ping.PushProfile",Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},v={Empty:"",OS_Notification:"OS.Notification"};a.PUSH_TOKEN_VERIFIED={NAME:"smPushTokenVerified",VALUE:!0,DAYS_TO_EXPIRE:1/24};var n=1,i=1,s=2,S="smViewPushOptin",I="smClickPushOptin",y="smClosePushOptin";a.index_db_name="fcm_token_details_db";function c(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,isRefreshToken:r,deviceType:soclHelper.isMobile()?s:i}}function l(e,t,n){u=soclHelper.replaceAll("{DNS}",e.dns,u),u=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,u);var o=soclHelper.createBaseIframe();o.setAttribute("src",u+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.featureSettings.pluginId+"&version="+e.featureSettings.version+"&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(u)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp+"&clientId="+e.clientId+"&sessionHash="+e.sessionHash+soclHelper.getSMIDToIFrameSrc(e.id)),o.setAttribute("id","social-push"),o.setAttribute("class","socl-iframe"),o.setAttribute("name","social-push"),n.appendChild(o)}var o="",u="https://{DNS}.soclminer.com.br/{PID}/",d="https://{DNS}.soclminer.com.br/00000000000000000000000000000000/",p="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/",f="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",g=function(){(e=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push")).addEventListener(m)},m=function(e){var t=document.getElementById("sm-push")||document.getElementById("sm-push-tracking");if(null!==t){if(void 0!==e.data.hasOptin){var n=e.data.customerId,o=e.data.endpoint;soclConnect.getId(n,function(e){0===e&&soclTracking.setSMIdByPushOrganic(n,o,function(e){}),soclHelper.setStoreValue("smpushoptin_"+n,"true")})}if(void 0!==e.data.show){var r=(g=e.data.show.split("|"))[0],i=g[1],s=(n=g[2],g[3]);t.setAttribute("class","socl-"+i);var a=soclCookie.getCookie(S),c=soclCookie.getCookie(y);if(!a&&!c){var l={};l.create_date=soclHelper.getNow(),l.path=window.location.pathname;var u=appConfig.IsMobile()?"17":"18";if(l.smid="8-".concat(u),soclHelper.isInSuppressionGroup(n,s)){soclCookie.createCookie(S,!0,r),l.kind="suppression";try{var d={type:h.Channel_Suppression,step:v.OS_Notification,channelId:s};soclHelper.createEvent(d)}catch(e){console.log(e)}}else{t.style.display="",soclPerfCounter.event(s,soclPerfCounter.type.Impression,5,n),soclCookie.createCookie(S,!0,r),socl.emmit.onView({id:s,type:"push-optin"}),l.kind="view";try{(d={type:h.Channel_View,step:v.OS_Notification,channelId:s}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}var p=soclHelper.addOrGetCookieAsList("sm_views",l);soclCookie.createCookie("sm_views",JSON.stringify(p),60)}}if(void 0!==e.data.close){var f=e.data.close;s=e.data.pluginId;soclCookie.createCookie(y,!0,f),socl.emmit.onClose({id:s,type:"push-optin"}),soclPush.closeMessage();try{(d={type:h.Channel_Rejection,step:v.OS_Notification,channelId:s}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}if(void 0!==e.data.click){f=e.data.click,s=e.data.pluginId;soclCookie.createCookie(y,!0,f),soclCookie.createCookie(I,!0,f),socl.emmit.onClick({id:s,type:"push-optin"}),soclPush.closeMessage();try{(d={type:h.Channel_Step_Conclusion,step:v.OS_Notification,channelId:s}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}if(void 0!==e.data.closeBounce&&soclPush.closeBounceMessage(),void 0!==e.data.closeOnsite&&soclPush.closeOnSiteMessage(),void 0!==e.data.identifier){n=(g=e.data.identifier.split("|"))[0];var g,m=g[1];soclConnect.getId(n,function(e){0===e&&soclHelper.setStoreValue(soclConnect.createSMIdKey(n),m)})}if(void 0!==e.data.createEvent)try{((d=e.data.createEvent).channelId||d.byPassChannel)&&soclHelper.createEvent(d)}catch(e){console.log(e)}}};a.createPushTrackingIFrame=function(e,t,n){d=soclHelper.replaceAll("{DNS}",e.dns,d),(r=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push-tracking")).addEventListener(m);var o=soclHelper.createBaseIframe();o.setAttribute("src",d+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId=00000000000000000000000000000000&version=0&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp),o.setAttribute("id","social-push-tracking"),o.setAttribute("class","socl-iframe"),o.setAttribute("name","social-push-tracking"),n.appendChild(o)},a.checkIfUserHaveSubscription=function(e,t){try{e.googleApp&&e.googleApp===n?a.checkIfUserHaveSubscriptionInGCM(e,function(e){t(!1)}):a.checkIfUserHaveSubscriptionInFirebase(e,function(e){t(e)})}catch(e){console.log(e)}},a.checkIfUserHaveSubscriptionInFirebase=function(e,t){try{if(null==document.getElementById("pushOptIn"))return t(!0);a.checkPushToken(e,function(e){t(e)})}catch(e){console.log(e),t(!1)}},a.checkIfUserHaveSubscriptionInGCM=function(n,o){try{null!=document.getElementById("pushOptIn")&&window.isSecureContext?"permissions"in navigator&&navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){switch(e.state){case"granted":"serviceWorker"in navigator?((t=document.createElement("link")).setAttribute("href",window.location.origin+"/manifest/chrome/manifest.json"),t.setAttribute("rel","manifest"),document.head.appendChild(t),navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(t){soclHelper.getPushEndpoint(function(e){e!==t.endpoint?soclConnect.getId(n.customerId,function(e){soclConnect.updateConnectedUser(c(e,n.customerId,t.endpoint,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",t.endpoint),soclHelper.setStoreValue("smpushoptin_"+n.customerId,"true")}),o(!0)}):o(!0),"true"!==n.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:n.customerId,endpoint:t.endpoint})})})})):o(!1);break;default:o(!1)}var t}):o(!1)}catch(e){console.log(e)}},a.checkPushToken=function(t,n){soclHelper.initFirebase(function(e){if(!e)return n(!0);a.verifyToken(t,function(e){return n(e)})})},a.verifyToken=function(e,t){if("granted"!==Notification.permission)return t(!1);a.getToken(e,function(e){return t(e)})},a.getToken=function(r,t){if("granted"!==Notification.permission){var i=soclHelper.getStoreValue(soclConnect.createSMIdKey(r.customerId));return i&&!soclCookie.getCookie(a.PUSH_TOKEN_VERIFIED.NAME)&&(soclHelper.setCookie(a.PUSH_TOKEN_VERIFIED.NAME,a.PUSH_TOKEN_VERIFIED.VALUE,365),soclHelper.getPushEndpoint(function(e){try{var t=soclHelper.getOrCreateSMObj(r.customerId),n={token:"",oldToken:e||"",pushPermission:Notification.permission},o={type:h.Ping_PushProfile,step:v.Empty,clientId:t.clientId,customerId:r.customerId,personId:i,channelId:null,additionalData:JSON.stringify(n),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:o})}catch(e){console.log(e)}})),t(!1)}(o=firebase.messaging()).onTokenRefresh(function(){a.getToken(r,function(e){return t(!0)})}),o.onMessage(function(e){}),soclConnect.getId(r.customerId,function(e){windowProxy.post({identifier:r.customerId+"|"+e});var t=soclHelper.createBaseIframe();t.setAttribute("src",p+"pixel.min.html?id="+r.customerId+"&smid="+e),t.setAttribute("id","social-push-pixel"),t.setAttribute("name","social-push-pixel"),document.body.insertBefore(t,document.body.childNodes[0])}),soclHelper.getPushEndpoint(function(e){e&&-1<e.indexOf("http")&&navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e&&soclPush.compareToken(e.endpoint,r)}).catch(function(e){C("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},e)})})}),o.getToken().then(function(e){e&&(soclPush.compareToken(e,r),t(!0))}).catch(function(e){console.log("Error while trying generate new token. Err:",e),t(!1)})},a.compareToken=function(i,s){soclHelper.getPushEndpoint(function(r){s.isRefreshToken=!(-1<r.indexOf("http")&&-1===i.indexOf("http")),soclConnect.getId(s.customerId,function(e){if(!soclCookie.getCookie(a.PUSH_TOKEN_VERIFIED.NAME)){soclHelper.setCookie(a.PUSH_TOKEN_VERIFIED.NAME,a.PUSH_TOKEN_VERIFIED.VALUE,a.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE);try{var t=soclHelper.getOrCreateSMObj(s.customerId),n={token:i||"",oldToken:r||"",pushPermission:Notification.permission},o={type:h.Ping_PushProfile,step:v.Empty,clientId:t.clientId,customerId:s.customerId,personId:e,channelId:null,additionalData:JSON.stringify(n),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:o})}catch(e){console.log(e)}}r!==i&&soclConnect.updateConnectedUser(c(e,s.customerId,i,!0,s.isRefreshToken),function(e){soclHelper.setStoreValue("pushendpoint",i),soclHelper.setStoreValue("smpushoptin_"+s.customerId,"true")})})})},a.updateUser=function(t,n){soclConnect.getId(t.customerId,function(e){soclConnect.updateConnectedUser(c(e,t.customerId,n,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",n),soclHelper.setStoreValue("smpushoptin_"+t.customerId,"true")})}),"true"!==t.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:t.customerId,endpoint:n})},a.popupInitializer=function(o){soclHelper.getPushEndpoint(function(e){var t,n;""===e?(t=function(e){if(e){var t=soclHelper.getQueryStringParams("userId"),n=soclHelper.getSMIDToIFrameSrc(o.customerId,t);$("#btClose").click(function(){windowProxy.post({close:o.daysToShowAfterClose,pluginId:o.pluginId})}),$("#btGo").click(function(){windowProxy.post({closeBounce:!0});var e=screen.width/2-525,t=screen.height/2-180;window.open(o.path+"popup.min.html?id="+o.customerId+"&name="+encodeURIComponent(o.name)+"&pluginId="+o.pluginId+"&url="+o.url+"&isMobile="+o.isMobile+"&googleApp="+o.googleApp+"&path="+encodeURIComponent(o.path)+"&version="+o.version+n,"pushPermission","width=1050,height=440,top="+t+",left="+e+";"),windowProxy.post({click:o.daysToShowAfterClose,pluginId:o.pluginId})}),windowProxy&&windowProxy.post({show:o.daysToShowAfterView+"|"+o.orientation+"|"+o.customerId+"|"+o.pluginId})}},("desktop"===(n=o.device)&&!appConfig.IsMobile()||"mobile"===n&&appConfig.IsMobile()||"all"===n)&&appConfig.IsChrome()?soclPushEngineAlfajor.supportPush(function(e){t(!0)}):t(!1)):soclConnect.getId(o.customerId,function(e){windowProxy.post({identifier:o.customerId+"|"+e});var t=soclHelper.createBaseIframe();t.setAttribute("src",p+"pixel.min.html?id="+o.customerId+"&smid="+e),t.setAttribute("id","social-push-pixel"),t.setAttribute("name","social-push-pixel"),document.body.insertBefore(t,document.body.childNodes[0])})})},a.closeMessage=function(){document.getElementById("sm-push").style.display="none"},a.closeBounceMessage=function(){null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag()},a.closeOnSiteMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},a.render=function(n){if(navigator.cookieEnabled){soclHelper.injectDiv("sm-push","none");var o=document.getElementById("sm-push");soclHelper.hasPushOptInBy(n.id,function(t){"true"!==t?function(t){soclHelper.injectCSS(f,"push.min.css");try{g(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){e&&l(n,t,o)}):l(n,t,o),soclHelper.setStoreValue("smpid_5",n.featureSettings.pluginId)})}},a.createEventProxy=function(e){window.opener.windowProxy.post({createEvent:e})},a.clearInstance=function(){e&&e.removeEventListener(m),r&&r.removeEventListener(m),soclHelper.removeElementById("sm-push"),soclHelper.removeElementById("sm-push-tracking")}}(soclPush)}).call(this,n(0).JL)},function(e,t,n){(function(o){function r(e,t){document.body.classList.remove(t),document.body.classList.add(e),window.smStepIntercept&&window.smStepIntercept(e,t)}function i(){return soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?p:d}function s(){soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?window.location.href=decodeURIComponent(soclHelper.getQueryStringParams("url")):window.close()}function a(e,t,n,o){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:i()}}function t(e){switch(r("stp2","stp1"),e.state){case"denied":soclHelper.getCID(function(n){0!==n?soclConnect.getId(n,function(t){0!==t?soclHelper.getPushEndpoint(function(e){""!==e?soclConnect.updateConnectedUser(a(t,n,e,!1),function(e){soclHelper.removeStoreValue("pushendpoint"),s()}):s()}):s()}):s()});break;case"granted":r("stp4","stp2");break;case"prompt":s()}}function n(n){r("stp2","stp1"),soclHelper.getCID(function(t){0!==t?soclConnect.getId(t,function(e){0===e?soclConnect.signInWithPush(t,11,n.endpoint,i(),function(e){soclHelper.setStoreValue("pushendpoint",n.endpoint),r("stp3","stp2")}):soclConnect.updateConnectedUser(a(e,t,n.endpoint,!0),function(e){soclHelper.setStoreValue("pushendpoint",n.endpoint),r("stp4","stp2")}),soclHelper.getStoreValue("sm_native")||soclPerfCounter.event(soclHelper.getQueryStringParams("pluginId"),soclPerfCounter.type.Click,u,soclHelper.getQueryStringParams("id"))}):(r("stp4","stp2"),o("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}))})}function c(){navigator.serviceWorker.ready.then(function(e){e.pushManager.subscribe({userVisibleOnly:!0}).then(n).catch(function(e){"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){o("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Error: Push permission state = "+e}),t(e)}).catch(function(e){o("ajaxAppender").fatalException({msg:"Exception",errorMsg:"Push Error to register"},e)}):"denied"===Notification.permission?o("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Denied Error: "+e.message}):o("ajaxAppender").fatal({msg:"Exception",errorMsg:"Push Error to register = "+e.message})})})}function l(t){navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e?(soclHelper.setStoreValue("pushendpoint",e.endpoint),t(!0)):t(!1)}).catch(function(e){o("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},e)})})}var e,u,d,p;window.soclPushEngineAlfajor={},e=soclPushEngineAlfajor,u=4,d=1,p=2,e.hasPermission=function(t){l(function(e){t(e)})},e.setDisplay=function(){soclConnect.getFbId(function(e){r(0===e?"stp3":"stp4","stp1")})},e.initialiseState=function(e){u=void 0===e?4:e,l(function(e){e?soclConnect.getFbId(function(e){r(0===e?"stp3":"stp4","stp1")}):"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){"denied"===e.state?t(e):c()}).catch(function(e){o("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while get push permission"},e)}):"denied"===Notification.permission?(r("stp4","stp1"),o("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Denied'"})):"default"===Notification.permission?(r("stp4","stp1"),o("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Default'"})):c()})},e.supportPush=function(e){"PushManager"in window?e(!0):e(!1)}}).call(this,n(0).JL)},function(e,t,n){n(14),n(0),n(15),n(16),n(17),n(1),n(8),n(9),n(2),n(3),n(18),n(4),n(5),n(10),n(19),n(11),n(20),n(21),n(12),n(6),n(7),n(22),e.exports=n(23)},function(e,t){window.socl_BlackList=["d29496c2-6137-4af7-9038-dbb5e388888a","c5b75f33-6671-4a13-ba6f-ef4755dc50d7","400f2d5f-5017-4303-8762-56ce506bdb1d","3f17483b-b519-4ccf-a8d9-6395d28f9793","815cff49-77e6-4424-9634-08b0e9da3be5","e8f2adf1-1cb3-47aa-9015-aef066c0e475","4a9c872c-0aa2-4d81-b1d6-7ca4b2f5b9a7","d40f44d3-5421-4dc2-b05a-cfc405107d9e","563daf73-db67-41dc-aa1b-98fbde0837c9","7149f1f9-7c0a-44b1-9ca2-f0c825d604ae","2e02f4ca-9bfc-4731-b9a1-e77c21fc3734","1f72e212-c76f-4c5a-96f4-7b106378c22b","d30374dd-56c6-4dfb-ab2b-1a054571486b","cc0e1b6c-7256-4583-aac1-c70f6b09209c","397344b2-d292-4355-bdac-00b0cb06bbb5","97255aea-1a9c-4f10-bdec-29b5956274ca","be774d94-fb32-4376-9cbe-995915abd6aa","47c3baec-611c-4b66-8bd6-c9b4ebf5bb04","16b84471-64f8-427e-b2ec-d67101f4d36e","e2f1fcb0-e624-4c79-a55f-9992b46fe8cf","888dd016-e588-40ea-97aa-cc94a9af7fa0","0eac4e5d-23d9-4bb1-a54f-507d597dac88","40ff4d0d-7b5f-4130-ba42-6b3b6a5c465d","6a552d5a-2bbb-49bb-89b1-b0efacb608c6","7f7c1c54-67e1-4a65-a654-069d7cc2db8e"]},function(e,t){var C;window.localStorageDB=function(e,t){var n="db_"+e,o=!1,g=null;try{var r=t==sessionStorage?sessionStorage:localStorage}catch(e){r=t}function i(e){return!!g.tables[e]}function a(e){i(e)||h("The table '"+e+"' does not exist")}function l(e,t,n){if(g.tables[e].fields=g.tables[e].fields.concat(t),void 0!==n)for(var o in g.data[e])if(g.data[e].hasOwnProperty(o))for(var r in t)g.data[e][o][t[r]]="object"==typeof n?n[t[r]]:n}function s(e,t){return t.ID=g.tables[e].auto_increment,g.data[e][g.tables[e].auto_increment]=t,g.tables[e].auto_increment++,t.ID}function m(r,i){return function(e,t){var n="string"==typeof e[r]?e[r].toLowerCase():e[r],o="string"==typeof t[r]?t[r].toLowerCase():t[r];return"DESC"===i?n==o?0:n<o?1:-1:n==o?0:o<n?1:-1}}function c(e,t){var n=[],o=!1,r=null;for(var i in g.data[e])if(g.data[e].hasOwnProperty(i)){for(var s in r=g.data[e][i],o=!0,t)if(t.hasOwnProperty(s))if("string"==typeof t[s]){if(r[s].toString().toLowerCase()!=t[s].toString().toLowerCase()){o=!1;break}}else if(r[s]!=t[s]){o=!1;break}o&&n.push(i)}return n}function u(e,t){var n=[];for(var o in g.data[e])g.data[e].hasOwnProperty(o)&&1==t(v(g.data[e][o]))&&n.push(o);return n}function d(e){var t=[];for(var n in g.data[e])g.data[e].hasOwnProperty(n)&&t.push(n);return t}function p(e,t,n){for(var o="",r=0,i=0;i<t.length;i++){o=t[i];var s=n(v(g.data[e][o]));if(s){delete s.ID;var a=g.data[e][o];for(var c in s)s.hasOwnProperty(c)&&(a[c]=s[c]);g.data[e][o]=I(e,a),r++}}return r}function f(){try{return r.setItem(n,JSON.stringify(g)),!0}catch(e){return!1}}function h(e){throw new Error(e)}function v(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function S(e){return!e.toString().match(/[^a-z_0-9]/gi)}function I(e,t){for(var n="",o={},r=0;r<g.tables[e].fields.length;r++)t[n=g.tables[e].fields[r]]!==C&&(o[n]=t[n]);return o}function y(e,t){for(var n="",o={},r=0;r<g.tables[e].fields.length;r++)o[n=g.tables[e].fields[r]]=null===t[n]||t[n]===C?null:t[n];return o}return(g=(g=r[n])&&JSON.parse(g.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))&&g.tables&&g.data||(S(e)?(g={tables:{},data:{}},f(),o=!0):h("The name '"+e+"' contains invalid characters")),{commit:function(){return f()},isNew:function(){return o},drop:function(){r.hasOwnProperty(n)&&delete r[n],g=null},serialize:function(){return JSON.stringify(g)},tableExists:function(e){return i(e)},tableFields:function(e){return t=e,g.tables[t].fields;var t},tableCount:function(){return function(){var e=0;for(var t in g.tables)g.tables.hasOwnProperty(t)&&e++;return e}()},columnExists:function(e,t){return function(e,t){var n=!1,o=g.tables[e].fields;for(var r in o)if(o[r]==t){n=!0;break}return n}(e,t)},createTable:function(e,t){var n,o,r=!1;if(S(e))if(this.tableExists(e))h("The table name '"+e+"' already exists.");else{for(var i=!0,s=0;s<t.length;s++)if(!S(t[s])){i=!1;break}if(i){var a={};for(s=0;s<t.length;s++)a[t[s]]=!0;for(var c in delete a.ID,t=["ID"],a)a.hasOwnProperty(c)&&t.push(c);n=e,o=t,g.tables[n]={fields:o,auto_increment:1},g.data[n]={},r=!0}else h("One or more field names in the table definition contains invalid characters")}else h("The database name '"+e+"' contains invalid characters.");return r},createTableWithData:function(e,t){("object"!=typeof t||!t.length||t.length<1)&&h("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");var n=Object.keys(t[0]);if(this.createTable(e,n)){this.commit();for(var o=0;o<t.length;o++)s(e,t[o])||h("Failed to insert record: ["+JSON.stringify(t[o])+"]");this.commit()}return!0},dropTable:function(e){var t;a(e),t=e,delete g.tables[t],delete g.data[t]},truncate:function(e){var t;a(e),t=e,g.tables[t].auto_increment=1,g.data[t]={}},alterTable:function(e,t,n){var o=!1;if(S(e)){if("object"==typeof t){for(var r=!0,i=0;i<t.length;i++)if(!S(t[i])){r=!1;break}if(r){var s={};for(i=0;i<t.length;i++)s[t[i]]=!0;for(var a in delete s.ID,t=[],s)s.hasOwnProperty(a)&&t.push(a);l(e,t,n),o=!0}else h("One or more field names in the table definition contains invalid characters")}else if("string"==typeof t)if(S(t)){var c=[];c.push(t),l(e,c,n),o=!0}else h("One or more field names in the table definition contains invalid characters")}else h("The database name '"+e+"' contains invalid characters");return o},rowCount:function(e){return a(e),function(e){var t=0;for(var n in g.data[e])g.data[e].hasOwnProperty(n)&&t++;return t}(e)},insert:function(e,t){return a(e),s(e,y(e,t))},insertOrUpdate:function(e,t,n){a(e);var o=[];if(t?"object"==typeof t?o=c(e,I(e,t)):"function"==typeof t&&(o=u(e,t)):o=d(e),0==o.length)return s(e,y(e,n));for(var r=[],i=0;i<o.length;i++)p(e,o,function(e){return r.push(e.ID),n});return r},update:function(e,t,n){a(e);var o=[];return t?"object"==typeof t?o=c(e,I(e,t)):"function"==typeof t&&(o=u(e,t)):o=d(e),p(e,o,n)},query:function(e,t,n,o,r,i){a(e);var s=[];return t?"object"==typeof t?s=c(e,I(e,t)):"function"==typeof t&&(s=u(e,t)):s=d(e),function(e,t,n,o,r,i){for(var s=null,a=[],c=null,l=0;l<t.length;l++)s=t[l],c=g.data[e][s],a.push(v(c));if(r&&r instanceof Array)for(l=0;l<r.length;l++)a.sort(m(r[l][0],1<r[l].length?r[l][1]:null));if(i&&i instanceof Array){for(var u=0;u<i.length;u++){var d={},p=i[u];for(l=0;l<a.length;l++)a[l]!==C&&(a[l].hasOwnProperty(p)&&d.hasOwnProperty(a[l][p])?delete a[l]:d[a[l][p]]=1)}var f=[];for(l=0;l<a.length;l++)a[l]!==C&&f.push(a[l]);a=f}return o=o&&"number"==typeof o?o:null,(n=n&&"number"==typeof n?n:null)&&o?a=a.slice(n,n+o):n?a=a.slice(n):o&&(a=a.slice(n,o)),a}(e,s,o,n,r,i)},queryAll:function(e,t){return t?this.query(e,t.hasOwnProperty("query")?t.query:null,t.hasOwnProperty("limit")?t.limit:null,t.hasOwnProperty("start")?t.start:null,t.hasOwnProperty("sort")?t.sort:null,t.hasOwnProperty("distinct")?t.distinct:null):this.query(e)},deleteRows:function(e,t){a(e);var n=[];return t?"object"==typeof t?n=c(e,I(e,t)):"function"==typeof t&&(n=u(e,t)):n=d(e),function(e,t){for(var n=0;n<t.length;n++)g.data[e].hasOwnProperty(t[n])&&delete g.data[e][t[n]];return t.length}(e,n)}}}},function(e,t){!function(o){"use strict";var s,r,i,e;o&&function(){var e=o.crypto||o.msCrypto;if(!s&&e&&e.getRandomValues)try{var t=new Uint8Array(16);i=s=function(){return e.getRandomValues(t),t},s()}catch(e){}if(!s){var n=new Array(16);r=s=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}();for(var a="function"==typeof Buffer?Buffer:Array,c=[],l={},t=0;t<256;t++)c[t]=(t+256).toString(16).substr(1),l[c[t]]=t;function f(e,t){var n=t||0;return c[e[n++]]+c[e[n++]]+c[e[n++]]+c[e[n++]]+"-"+c[e[n++]]+c[e[n++]]+"-"+c[e[n++]]+c[e[n++]]+"-"+c[e[n++]]+c[e[n++]]+"-"+c[e[n++]]+c[e[n++]]+c[e[n++]]+c[e[n++]]+c[e[n++]]+c[e[n++]]}var n=s(),g=[1|n[0],n[1],n[2],n[3],n[4],n[5]],m=16383&(n[6]<<8|n[7]),h=0,v=0;function u(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new a(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var i=0;i<16;i++)t[o+i]=r[i];return t||f(r)}var d=u;d.v1=function(e,t,n){var o=t&&n||0,r=t||[],i=null!=(e=e||{}).clockseq?e.clockseq:m,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:v+1,c=s-h+(a-v)/1e4;if(c<0&&null==e.clockseq&&(i=i+1&16383),(c<0||h<s)&&null==e.nsecs&&(a=0),1e4<=a)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,m=i;var l=(1e4*(268435455&(s+=122192928e5))+(v=a))%4294967296;r[o++]=l>>>24&255,r[o++]=l>>>16&255,r[o++]=l>>>8&255,r[o++]=255&l;var u=s/4294967296*1e4&268435455;r[o++]=u>>>8&255,r[o++]=255&u,r[o++]=u>>>24&15|16,r[o++]=u>>>16&255,r[o++]=i>>>8|128,r[o++]=255&i;for(var d=e.node||g,p=0;p<6;p++)r[o+p]=d[p];return t||f(r)},d.v4=u,d.parse=function(e,t,n){var o=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){r<16&&(t[o+r++]=l[e])});r<16;)t[o+r++]=0;return t},d.unparse=f,d.BufferClass=a,d._rng=s,d._mathRNG=r,d._nodeRNG=void 0,d._whatwgRNG=i,e=o.uuid,d.noConflict=function(){return o.uuid=e,d},o.uuid=d}("undefined"!=typeof window?window:null)},function(e,t){!function(a,c){var l,u=this,d=256,p=6,f="random",g=c.pow(d,p),m=c.pow(2,52),h=2*m,v=d-1;function S(e){var t,n=e.length,s=this,o=0,r=s.i=s.j=0,i=s.S=[];for(n||(e=[n++]);o<d;)i[o]=o++;for(o=0;o<d;o++)i[o]=i[r=v&r+e[o%n]+(t=i[o])],i[r]=t;(s.g=function(e){for(var t,n=0,o=s.i,r=s.j,i=s.S;e--;)t=i[o=v&o+1],n=n*d+i[v&(i[o]=i[r=v&r+t])+(i[r]=t)];return s.i=o,s.j=r,n})(d)}function I(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function y(e,t){for(var n,o=e+"",r=0;r<o.length;)t[v&r]=v&(n^=19*t[v&r])+o.charCodeAt(r++);return C(t)}function C(e){return String.fromCharCode.apply(0,e)}c["seed"+f]=function(e,t,n){function o(){for(var e=s.g(p),t=g,n=0;e<m;)e=(e+n)*d,t*=d,n=s.g(1);for(;h<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t}var r=[],i=y(function e(t,n){var o,r=[],i=typeof t;if(n&&"object"==i)for(o in t)try{r.push(e(t[o],n-1))}catch(e){}return r.length?r:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,C(a)]:null==e?function(){try{if(l)return C(l.randomBytes(d));var e=new Uint8Array(d);return(u.crypto||u.msCrypto).getRandomValues(e),C(e)}catch(e){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,C(a)]}}():e,3),r),s=new S(r);return o.int32=function(){return 0|s.g(4)},o.quick=function(){return s.g(4)/4294967296},o.double=o,y(C(s.S),a),(t.pass||n||function(e,t,n,o){return o&&(o.S&&I(o,s),e.state=function(){return I(s,{})}),n?(c[f]=e,t):e})(o,i,"global"in t?t.global:this==c,t.state)},y(c.random(),a)}([],Math)},function(e,t,n){(function(r){window.soclError={},function(e){var t=r.createAjaxAppender("ajaxAppender"),n="";soclHelper&&(n=soclHelper.getEnvironment());var o="https://"+n+"api.soclminer.com.br/v2.1/client/error";t.setOptions({bufferSize:3,storeInBufferLevel:r.getErrorLevel(),level:r.getFatalLevel(),sendWithBufferLevel:r.getFatalLevel(),url:o}),window.onerror=function(e,t,n,o,r){return!1},e.setAppender=function(){r().setOptions({appenders:[t]})}}(soclError),soclError.setAppender()}).call(this,n(0).JL)},function(e,t,n){(function(e){window.firebaseMessaging={},function(r){var c={Ping:"Ping.PushProfile",Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_AlreadyConnected:"Channel.Step.AlreadyConnected",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_Block:"Channel.Step.Block",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection",Channel_Step_Error:"Channel.Step.Error"},l={Empty:"",OS_Notification:"OS.Notification",OS_Notification_Popup:"OS.Notification.Popup",OS_Notification_Popup_Policy:"OS.Notification.Popup.Policy",OS_Notification_Popup_PoweredBy:"OS.Notification.Popup.PoweredBy",OS_Notification_Popup_Dialog:"OS.Notification.Popup.Dialog"};r.start=function(e,t){if(!window.isSecureContext)return t(!1);soclHelper.initFirebase(function(e){return t(e)})},r.onMessage=function(e){},r.onTokenRefresh=function(e){e.onTokenRefresh(function(){e.getToken().then(function(e){console.log("Token refreshed. New token: "+e),soclConnect.getId(metadata.customerId,function(e){soclConnect.updateConnectedUser(u(e,metadata.customerId,currentToken,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",currentToken),soclHelper.setStoreValue("smpushoptin_"+metadata.customerId,"true")})}),"true"!==metadata.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:metadata.customerId,endpoint:currentToken})}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})})},r.getToken=function(e,n,o){e.getToken().then(function(t){console.log("currentToken",t),t?(soclHelper.getPushEndpoint(function(e){e!==t&&soclConnect.getId(n.customerId,function(e){soclConnect.updateConnectedUser(u(e,n.customerId,t,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",t),soclHelper.setStoreValue("smpushoptin_"+n.customerId,"true")})}),"true"!==n.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:n.customerId,endpoint:t})}),o(!0)):o(!1)}).catch(function(e){console.log("An error occurred while retrieving token. ",e),o(!1)})};var u=function(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:r}};r.organicPushPermission=function(o){if(!soclHelper.getStoreValue("pushendpoint")&&firebase){var e=firebase.messaging();soclHelper.getCID(function(n){e.getToken().then(function(t){if(0!==n){var e=d();soclConnect.signInWithPush(n,11,t,e,function(e){soclHelper.setStoreValue("pushendpoint",t),o(!0,e)})}})})}o(!1,0)};var d=function(){var e=1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=2),e},t=null,p=0;r.requestPermission=function(n,o){soclHelper.initFirebase(function(e){if(!e)return o(!1);p=d(),t=firebase.messaging(),soclPerfCounter.event(n.pluginId,soclPerfCounter.type.View,5,n.customerId),setTimeout(function(){try{var e={type:c.Channel_Step_View,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}$(".policy a").click(function(){try{var e={type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_Policy,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}),$("#poweredBy").click(function(){try{var e={type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_PoweredBy,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}})},1e3),null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag(),soclCookie.createCookie("smViewPushOptin",!0,n.daysToShowAfterView),Notification.requestPermission().then(function(e){switch(e){case"granted":r.permissionGranted(n.pluginId,n.customerId,function(e){return o(e)});break;case"denied":r.permissionDenied(n.pluginId);break;case"default":r.permissionDefault(n.pluginId);break;default:try{var t=[];for(t.push({type:c.Channel_Step_Error,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:n.pluginId}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}).catch(function(e){try{var t=[];for(e&&e.code&&e.code.includes("block")?t.push({type:c.Channel_Step_Block,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}):t.push({type:c.Channel_Step_Rejection,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:n.pluginId}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){console.log("SM - Failed on sending rejection event to engage",e),window.opener.console.log("SM - Failed on sending rejection event to engage",e)}window.close(),window.close()})})},r.permissionGranted=function(r,s,a){p=p||d(),(t=t||firebase.messaging()).getToken().then(function(o){soclHelper.setCookie(soclPush.PUSH_TOKEN_VERIFIED.NAME,soclPush.PUSH_TOKEN_VERIFIED.VALUE,soclPush.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE),soclHelper.getCID(function(n){0!==n?soclConnect.getId(n,function(e){if(0===e){soclConnect.signInWithPush(n,11,o,p,function(e){soclHelper.setStoreValue("pushendpoint",o)},r);try{var t=[{type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_Dialog,channelId:r}];for(i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}else{soclConnect.updateConnectedUser(u(e,n,o,!0,p),function(e){soclHelper.setStoreValue("pushendpoint",o)});try{t=[{type:c.Channel_Step_AlreadyConnected,step:l.OS_Notification_Popup_Dialog,channelId:r}];for(i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending AlreadyConnected Event to Engage",e),console.log("SM - Failed on sending AlreadyConnected Event to Engage",e)}}soclPerfCounter.event(r,soclPerfCounter.type.Click,5,s),$("#btnSave").click(function(e){try{var t=[];for($("input[type = 'email']").val()?t.push({type:c.Channel_Conclusion,step:l.OS_Notification,channelId:r}):t.push({type:c.Channel_ConclusionWithRejection,step:l.OS_Notification,channelId:r}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending conclusion event to engage",e),console.log("SM - Failed on sending conclusion event to engage",e)}});try{a(!0)}catch(e){window.opener.console.log("SM - Get Token Callback Error",e),console.log("SM - Get Token Callback Error",e),window.close(),window.close()}}):(e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}),window.close(),window.close())})}).catch(function(e){console.log("SM - An error occurred while retrieving token. ",e),window.opener.console.log("SM - An error occurred while retrieving token. ",e),soclPushEngineAlfajor.setDisplay("stp4","stp1");try{var t={type:c.Channel_Step_Error,step:l.OS_Notification_Popup_Dialog,channelId:r};t.channelId&&soclPush.createEventProxy(t)}catch(e){window.opener.console.log(e),console.log(e)}window.close(),window.close()})},r.permissionDenied=function(e){try{var t=[];for(t.push({type:c.Channel_Step_Block,step:l.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()},r.permissionDefault=function(e){try{var t=[];for(t.push({type:c.Channel_Step_Rejection,step:l.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}(firebaseMessaging)}).call(this,n(0).JL)},function(e,t){window.soclOnsiteSales={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};function r(t,e,n){t.featureSettings.pluginId?soclHelper.hasPushOptInBy(t.id,function(e){s=soclHelper.replaceAll("{PID}",t.featureSettings.pluginId,s),n.setAttribute("src",o+"index.min.html?appId="+t.appId+"&id="+t.id+"&name="+encodeURIComponent(t.name)+"&pluginId="+t.featureSettings.pluginId+"&pluginParameters="+encodeURIComponent(t.featureSettings.pluginParameters)+"&version="+t.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&hasOptIn="+e+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+t.gaEnabled)}):n.setAttribute("src",o+"index.min.html?appId="+t.appId+"&id="+t.id+"&name="+encodeURIComponent(t.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&gaEnabled="+t.gaEnabled),n.setAttribute("id","social-onsite"),n.setAttribute("class","socl-iframe"),n.setAttribute("name","social-onsite"),e.appendChild(n)}function t(e,t){null==w.getAttribute("hasViewedOnSiteInThisPage")&&parseInt(soclHelper.getPosition())>=parseInt(i.scrollPercentage)&&(w.setAttribute("hasViewedOnSiteInThisPage","true"),r(e,w,t))}var i,w,n=null,b={Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},E={Empty:"",OS_Message:"OS.Message",OS_Message_Fab:"OS.Message.Fab",OS_Message_Message:"OS.Message.Message"},s="https://{DNS}.soclminer.com.br/{PID}",o="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/html/onsite-sales/",a="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",c=["d0fc654df5094d32a4b6d9ad8d02cbb4","d13b2682b72e42cc9203ee1f0a20b68d"],l=function(){(n=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite")).addEventListener(u)},u=function(e){if(null!==(w=document.getElementById("sm-onsite-sales"))){if(void 0!==e.data.show){var t=(h=e.data.show.split("|"))[0],n=h[1],o=parseInt(h[2]),r=parseInt(h[3]);w.setAttribute("class","socl-"+t);var i=soclHelper.getStoreValue("smcid"),s=soclHelper.getSessionValue("pagesview_"+n),a=parseInt(s)>o,c=soclCookie.getCookie("smClickOnSite_"+n),l=soclCookie.getCookie("smClosedOnSite_"+n),u=parseInt(soclHelper.getStoreValue("onsiteview_"+n));if(!l&&!c&&a&&(!u||0==r||parseInt(u)<r)){var d={ImpactTimes:isNaN(u)?0:u},p={};p.create_date=soclHelper.getNow(),p.path=window.location.pathname;var f=appConfig.IsMobile()?"7":"3";if(p.smid=f.concat("-8"),soclHelper.isInSuppressionGroup(i,n)){p.kind="suppression";try{var g={type:b.Channel_Suppression,step:E.OS_Message,channelId:n,additionalData:d};soclHelper.createEvent(g),isNaN(u)?soclHelper.setStoreValue("onsiteview_"+n,"1"):soclHelper.setStoreValue("onsiteview_"+n,JSON.stringify(u+=1)),soclOnsiteSales.closeMessage()}catch(e){console.log(e)}}else{w.style.display="",p.kind="view";try{(g={type:b.Channel_View,step:E.OS_Message,channelId:n,additionalData:d}).channelId&&soclHelper.createEvent(g)}catch(e){console.log(e)}}var m=soclHelper.addOrGetCookieAsList("sm_views",p);soclCookie.createCookie("sm_views",JSON.stringify(m),60)}}if(void 0!==e.data.clickToOpen)try{(g={type:b.Channel_Step_Conclusion,step:E.OS_Message_Fab,channelId:e.data.clickToOpen}).channelId&&soclHelper.createEvent(g)}catch(e){console.log(e)}if(void 0!==e.data.open){var h=e.data.open.split("|");r=parseInt(h[0]),t=h[1],i=h[2],n=h[3],o=parseInt(h[4]);if(w.setAttribute("class","socl-open socl-"+t),!soclCookie.getCookie("smClosedOnSite_"+n)&&!soclCookie.getCookie("smClickOnSite_"+n)&&parseInt(soclHelper.getSessionValue("pagesview_"+n))>o&&(!soclHelper.getStoreValue("onsiteview_"+n)||parseInt(soclHelper.getStoreValue("onsiteview_"+n))<r||0==r)){w.style.display="",soclPerfCounter.event(n,soclPerfCounter.type.View,6,i);var v=parseInt(soclHelper.getStoreValue("onsiteview_"+n));isNaN(v)?soclHelper.setStoreValue("onsiteview_"+n,"1"):(v+=1,soclHelper.setStoreValue("onsiteview_"+n,JSON.stringify(v))),soclCookie.createCookie("smViewOnSite",!0,3),socl.emmit.onView({id:n,type:"onsite"});try{(g={type:b.Channel_Step_View,step:E.OS_Message_Message,channelId:n}).channelId&&soclHelper.createEvent(g)}catch(e){console.log(e)}}}if(void 0!==e.data.close){h=e.data.close.split("|");var S=parseInt(h[0]);n=h[1];0<S&&soclCookie.createCookieOnSite("smClosedOnSite_"+n,!0,S),soclHelper.setStoreValue("onsiteview_"+h.pluginId,"0"),soclCookie.createCookie("smCloseOnSite",!0,3),socl.emmit.onClose({id:h.pluginId,type:"onsite"}),soclOnsiteSales.closeMessage();try{(g={type:b.Channel_Rejection,step:E.OS_Message,channelId:n}).channelId&&soclHelper.createEvent(g)}catch(e){console.log(e)}}if(void 0!==e.data.click){n=(h=e.data.click.split("|"))[0],i=h[1];var I=parseInt(h[2]),y=h[3],C=H(new URL(y));soclPerfCounter.event(n,soclPerfCounter.type.Click,6,i),soclHelper.setStoreValue("onsiteview_"+n,"0"),0<I&&soclCookie.createCookieOnSite("smClickOnSite_"+n,!0,I),soclCookie.createCookie("smClickOnSite",!0,3),socl.emmit.onClick({id:n,type:"onsite"});try{(g={type:b.Channel_Conclusion,step:E.OS_Message,channelId:n}).channelId&&soclHelper.createEvent(g)}catch(e){console.log(e)}window.top.location.href=C.toString(),setTimeout(function(){soclOnsiteSales.closeMessage()},1e3)}}},H=function(n){return c.includes(soclHelper.getStoreValue("smcid"))&&new URLSearchParams(window.location.search).forEach(function(e,t){n.searchParams.append(t,e)}),n};e.closeMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},e.render=function(o){navigator.cookieEnabled&&(soclHelper.injectDiv("sm-onsite-sales","none"),null!==(w=document.getElementById("sm-onsite-sales"))&&o.featureSettings.pluginParameters&&function(t){soclHelper.injectCSS(a,"onsite.min.css");try{l(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){if(e){var n=soclHelper.createBaseIframe();i=JSON.parse(o.featureSettings.pluginParameters),s=soclHelper.replaceAll("{DNS}",o.dns,s),0<i.scrollPercentage?(document.addEventListener("scroll",function(){t(o,n)},!1),0<i.timeInSite&&setTimeout(function(){var e,t;e=o,t=n,null==w.getAttribute("hasViewedOnSiteInThisPage")&&(w.setAttribute("hasViewedOnSiteInThisPage","true"),r(e,w,t))},i.timeInSite)):r(o,w,n)}}))},e.clearInstance=function(){n&&n.removeEventListener(u),document.removeEventListener("scroll",t),soclHelper.removeElementById("sm-onsite-sales")}}(soclOnsiteSales)},function(e,t){window.soclOnSite={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var r="https://{DNS}.soclminer.com.br/{PID}",i="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/html/",s="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/assets/css/",a=function(){new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite").addEventListener(t)},t=function(e){var t=document.getElementById("sm-onsite");if(null!==t){if(void 0!==e.data.show){var n=(a=e.data.show.split("|"))[0],o=a[1];t.setAttribute("class","socl-"+n),"true"===o?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(t.style.display=""):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||(t.style.display="")}if(void 0!==e.data.open){var r=(a=e.data.open.split("|"))[0],i=(n=a[1],a[2]),s=a[3];o=a[4];t.setAttribute("class","socl-open socl-"+n),"true"===o?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(null!==s&&soclPerfCounter.event(s,soclPerfCounter.type.Impression,4,i),soclCookie.createCookie("smViewedOnSiteLead",!0,r)):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||soclCookie.createCookie("smViewedOnSite",!0,r)}if(void 0!==e.data.close){var a,c=(a=e.data.close.split("|"))[0];"true"===(o=a[1])?soclCookie.createCookie("smClosedOnSiteLead",!0,c):soclCookie.createCookie("smClosedOnSite",!0,c),soclOnSite.closeMessage()}}};e.closeMessage=function(){null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag()},e.render=function(n){if(navigator.cookieEnabled){soclHelper.injectDiv("sm-onsite","none");var o=document.getElementById("sm-onsite");null!==o&&function(t){soclHelper.injectCSS(s,"onsite.min.css");try{a(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){if(e){var t=soclHelper.createBaseIframe();r=soclHelper.replaceAll("{DNS}",n.dns,r),n.featureSettings.pluginId?soclHelper.hasPushOptInBy(n.id,function(e){r=soclHelper.replaceAll("{PID}",n.featureSettings.pluginId,r),t.setAttribute("src",i+"index-alfajor.min.html?appId="+n.appId+"&id="+n.id+"&name="+encodeURIComponent(n.name)+"&pluginId="+n.featureSettings.pluginId+"&version="+n.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(r)+"&hasOptIn="+e+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+n.gaEnabled),soclHelper.setStoreValue("smpid_4",n.featureSettings.pluginId)}):t.setAttribute("src",i+"index-alfajor.min.html?appId="+n.appId+"&id="+n.id+"&name="+encodeURIComponent(n.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(r)+"&gaEnabled="+n.gaEnabled),t.setAttribute("id","social-onsite"),t.setAttribute("class","socl-iframe"),t.setAttribute("name","social-onsite"),o.appendChild(t)}})}}}(soclOnSite)},function(e,t){soclOuibounce=function(t,e){var e=e||{},n=e.aggressive||!1,o=m(e.sensitivity,20),r=m(e.timer,1e3),i=m(e.delay,0),s=e.callback||function(){},a=e.onBeforeShow||function(){},c=e.displayBounce,l=h(e.cookieExpire)||"",u=e.cookieDomain?";domain="+e.cookieDomain:"",d=e.cookieName?e.cookieName:"viewedOuibounceModal",p=!0===e.sitewide?";path=/":"",f=null,g=document.documentElement;function m(e,t){return void 0===e?t:e}function h(e){var t=24*e*60*60*1e3,n=new Date;return n.setTime(n.getTime()+t),"; expires="+n.toUTCString()}function v(e){e.clientY>o||C(d,"true")&&!n||!c||(f=setTimeout(w,i))}function S(e){f&&(clearTimeout(f),f=null)}setTimeout(function(){g.addEventListener("mouseleave",v),g.addEventListener("mouseenter",S),g.addEventListener("keydown",y)},r);var I=!1;function y(e){I||C(d,"true")&&!n||e.metaKey&&76===e.keyCode&&(I=!0,f=setTimeout(w,i))}function C(e,t){return function(){for(var e=document.cookie.split("; "),t={},n=e.length-1;0<=n;n--){var o=e[n].split("=");t[o[0]]=o[1]}return t}()[e]===t}function w(){var e=a()||!1;e||(t&&(t.style.display="block"),b(),s())}function b(e){var e=e||{};void 0!==e.cookieExpire&&(l=h(e.cookieExpire)),!0===e.sitewide&&(p=";path=/"),void 0!==e.cookieDomain&&(u=";domain="+e.cookieDomain),void 0!==e.cookieName&&(d=e.cookieName),document.cookie=d+"=true"+l+u+p,g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",S),g.removeEventListener("keydown",y)}return{fire:w,disable:b,destroy:function(){g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",S),g.removeEventListener("keydown",y)}}}},function(e,t){function l(){a=!1}var s,a,c;window.soclOrganic={},s=soclOrganic,a=!1,c=function(e,t,n,o,r){if(a)return void 0===r&&(r=10),void(0<r&&window.setTimeout(function(){c(e,t,n,o,r--)},1e3));a=!0;try{if(void 0===e)return!1;void 0===n&&(n=2),void 0===o&&(o=!1);var i={};i[e]={value:t,weight:n},s.updateUser(i,o)}catch(e){console.log("SM - Error on update organic optin user",e),l()}},s.updateUser=function(e,t){void 0===t&&(t=!1);var n,o,r,i=soclHelper.getLocalStorageValue("socl_Organic"),s=(n=i=i||{},o=e,r=!1,Object.keys(o).forEach(function(e){(void 0===n[e]||n[e].value!=o[e].value&&n[e].weight<o[e].weight)&&(void 0===n[e]&&(n[e]={}),n[e].value=o[e].value,n[e].weight=o[e].weight,r=!0)}),!!r&&n);if(s){soclHelper.setLocalStorageValue("socl_Organic",JSON.stringify(s));var a=soclHelper.getStoreValue("smcid"),c=soclHelper.getStoreValue(soclConnect.createSMIdKey(soclHelper.replaceAll("-","",a)));t?l():c?soclConnect.updateOrganic(s,a,c,l):soclConnect.signInOrganic(s,a,24,l)}else l()},s.updateUserEmail=function(e,t,n){c("email",e,t,n)},s.updateUserName=function(e,t,n){e.includes("*")||c("firstName",e,t,n)},s.updateUserPhone=function(e,t,n){"string"!=typeof e&&(e=String(e));var o=(e=e.replace(/\D/g,"")).match(/(\d{0,2})(\d{0,5})(\d{0,4})/);e=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1],/^(\(\d{2}\)\s)(\d{5}\-\d{4})$/.test(e)&&c("phone",e,t,n)}}]);